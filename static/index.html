<!DOCTYPE html>
<html lang="en-US">
<head id="doc-head">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Linny-R</title>

<!--
Linny-R is an executable graphical specification language for (mixed integer)
linear programming (MILP) problems, especially unit commitment problems (UCP).
The Linny-R language and tool have been developed by Pieter Bots at Delft
University of Technology, starting in 2009. The project to develop a browser-
based version started in 2017. See https://linny-r.org for more information.

This HTML document (index.html) provides the browser-based GUI for editing and
executing Linny-R models. The associated CSS file should be located in the same
directory (Linny-R)/static/. The JavaScript files should be located in the
sub-directory (Linny-R)/static/scripts.

NOTE: One of these files (iro.js) is authored by James Daniel. This JS code
implements the elegant color picker that appears in the Edit variable dialog
of the Chart Manager.

NOTE: The Linny-R model editor is implemented in JavaScript and will work
"stand-alone" in modern web browsers. The model solver has been implemented as
a server-side application, and requires a web server that will process the HTTP
requests made by the virtual machine that translates a Linny-R model to MILP
equations. Three such web servers have been implemented: one in JavaScript
(included in the Linny-R distribution via npm), one in Python (for stand-alone
computers), and one in PHP (for LAMPS production servers). These implementations
will be made available via GitHub in due time.
-->

<!--
Copyright (c) 2017-2025 Delft University of Technology

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
  <link rel="shortcut icon" type="image/png" href="images/icon.png">
  <!-- NOTE: The bootstrap script will dynamically load all other scripts. -->
  <script type="text/javascript" src="scripts/linny-r-bootstrap.js"></script>
  <script type="text/javascript" src="scripts/iro.min.js"></script>
</head>
<!-- NOTE: Do not display the page until all scripts have been loaded
     and software update request has been made.
  -->
<body hidden onload="loadLinnyR();">
  <!-- Header shows top menu bar. -->
  <header>
    <img id="static-icon" src="images/icon.svg">
    <img id="linny-r-name" src="images/linny-r.svg">
    <div id="linny-r-version-number"></div>
    <div id="topbar">
      <img id="new-btn" class="btn enab" src="images/new.png"
           title="Create new model">
      <img id="load-btn" class="btn enab" src="images/open.png"
           title="Load model (Ctrl-L)
&#x21A5; Alt-click to upload it via the browser">
      <img id="settings-btn" class="btn enab" src="images/settings.png"
           title="Change model settings (Alt-M)">
      <img id="save-btn" class="btn enab" src="images/save.png"
           title="Save model (Ctrl-S)
&#x270E; Shift-click to save it under a different name (Ctrl-Shift-S)
&#x202F;&#x2B73;&#x202F;&#x202F;Alt-click to download it directly via the browser">
      <img id="actors-btn" class="btn enab" src="images/actors.png"
           title="Manage actors (Alt-A)">
      <img id="dataset-btn" class="btn enab" src="images/dataset.png"
           title="Manage datasets (Ctrl-D)">
      <img id="equation-btn" class="btn enab" src="images/equation.png"
           title="Manage equations (Ctrl-E)">
      <img id="chart-btn" class="btn enab" src="images/chart.png"
           title="Manage charts (Ctrl-O)">
      <img id="savediagram-btn" class="btn enab" src="images/download-diagram.png"
           title="&#x202F;&#x2B73;&#x202F;&#x202F;Download diagram as Portable Network Graphics bitmap image (Ctrl-P)
&#x270E; Shift-click to download as Scalable Vector Graphics (Ctrl-Shift-P)">
      <img id="sensitivity-btn" class="btn enab" src="images/sensitivity.png"
           title="Sensitivity analysis (Ctrl-J)">
      <img id="experiment-btn" class="btn enab" src="images/experiment.png"
           title="Manage experiments (Ctrl-X)">
      <img id="finder-btn" class="btn enab" src="images/find.png"
           title="Find model elements by their name (Ctrl-F)">
      <img id="monitor-btn" class="btn enab" src="images/monitor.png"
           title="View solver monitor (Ctrl-M)">
      <img id="receiver-btn" class="btn enab" src="images/receiver.png"
           title="Listen for commands from local host (Ctrl-H)">
      <img id="documentation-btn" class="btn enab" src="images/info.png"
           title="View information and documentation (Ctrl-I)">
      <img id="compare-btn" class="btn enab" src="images/compare.png"
           title="Compare current model A with some other model B (Ctrl-B)">
      <img id="update-btn" class="btn enab off" src="images/update.png"
           title="Update clusters that have been included in the model">
    </div>
    <!-- If diagram is not the TOP cluster, show a button to move up to
         the parent cluster.
      -->
    <div id="focal-cluster">
      <img id="focal-black-box" class="btn" src="images/is-black-box.png"
           title="This cluster is a &quot;black box&quot;" hidden>
      <div id="focal-name"></div>
      <img id="parent-btn" class="btn enab" src="images/parent.png"
           title="View parent cluster (Ctrl-U)">
      <img id="lift-btn" class="btn disab" src="images/lift.png"
           title="Move selection to parent cluster">
    </div>
    <!-- Server host is depicted in upper right corner. -->
    <div id="server-host-icon">
      <img id="host-logo" src="images/host-logo.png"
           title="Solver host">
    </div>
  </header>
  <!-- The main window pane shows the diagram (SVG image). -->
  <main>
    <div id="cc">
      <svg id="svg-root" version="1.1" xmlns="http://www.w3.org/2000/svg"
           xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
      </svg>
    </div>
  </main>
  <!-- The footer displays the status bar with X/Y coordinates, zoom
       in/out buttons, buttons for moving forward/backward in time, and
       the status line that displays info, notifications, warnings, and
       error messages. The set-up progress bar shows a growing colored
       needle indicating progress of making Simplex tableau and input
       file for the solver.
   -->
  <footer>
    <div id="set-up-progress">
      <div id="set-up-progress-bar"></div>
    </div>
    <table id="statusbar">
      <tr>
        <td id="pos-x">X = 0</td>
        <td id="pos-y">Y = 0</td>
        <td>
          <img id="zoomout-btn" class="sbtn senab" src="images/zoom-out.png">
        </td>
        <td id="zoom">100%</td>
        <td id="zoom-sep">
          <img id="zoomin-btn" class="sbtn senab" src="images/zoom-in.png">
        </td>
        <td>
          <img id="stepback-btn" class="sbtn senab" src="images/back.png">
        </td>
        <td id="step">1</td>
        <td id="step-sep">
          <img id="stepforward-btn" class="sbtn senab" src="images/forward.png">
        </td>
        <td id="issue-panel">
          <span id="prev-issue">&#x25C1;</span>
          <span id="issue-nr"></span>
          <span id="next-issue">&#x25B7;</span>
        </td>
        <td id="info-line" title="Status bar"></td>
        <td id="recall-btn"
          title="Click to view previous notifications, warnings and error messages">
        </td>
      </tr>
    </table>
  </footer>
  <!-- The side bar holds buttons for editing the model (ADD, DELETE, UNDO, REDO)
       and for running it.
    -->
  <div id="sidebar">
    <img id="process-btn" class="btn toggle enab" src="images/process.png"
         title="Add process">
    <img id="product-btn" class="btn toggle enab" src="images/product.png"
         title="Add product">
    <img id="link-btn" class="btn toggle enab" src="images/link.png"
         title="Draw link">
    <img id="constraint-btn" class="btn toggle enab" src="images/constraint.png"
         title="Add composite constraint">
    <img id="cluster-btn" class="btn toggle disab" src="images/cluster.png"
         title="Add cluster">
    <img id="note-btn" class="btn toggle enab v-sep" src="images/note.png"
         title="Add note">
    <img id="replace-btn" class="btn disab" src="images/replace-product.png"
         title="Replace selected product by some other product (Alt-P)">
    <img id="clone-btn" class="btn disab" src="images/clone.png"
         title="Copy selection (Ctrl-C)
&#x2750; Alt-click to clone (Alt-C)">
    <img id="paste-btn" class="btn disab v-sep" src="images/paste.png"
         title="Paste selection (Ctrl-V)">
    <img id="delete-btn" class="btn disab v-sep" src="images/delete.png"
         title="Delete">
    <img id="undo-btn" class="btn enab" src="images/undo.png"
         title="Undo (Ctrl-Z)">
    <img id="redo-btn" class="btn disab" src="images/redo.png"
         title="Redo (Ctrl-Y)">
    <img id="solve-btn" class="btn enab" src="images/solve.png"
         title="Run simulation (Ctrl-R)">
    <img id="stop-btn" class="btn enab off" src="images/stop.png"
         title="Stop solving (Ctrl-Q)">
    <img id="reset-btn" class="btn enab off" src="images/reset.png"
         title="Reset model (Ctrl-K)">
  </div>
  
  <!-- These hidden DIVs help to output created files to the browser as
       "attachments" (downloads).
    --> 
  <a id="xml-saver" target='_blank' hidden="hidden"></a>
  <a id="svg-saver" target='_blank' hidden="hidden"></a>

  <!-- The following hidden DIVs are dialog windows that are shown as "modals",
       i.e., disabling all other functions.
    -->

  <!-- The LOGON dialog prompts for (optional) user name and password. -->
  <div id="logon-modal" class="modal">
    <div id="logon-dlg" class="inp-dlg">
      <div class="dlg-title">
        Logon to server
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table id="logon-tbl">
        <tr>
          <td>Mail&nbsp;address:</td>
          <td><input id="logon-name" type="text" autocomplete="off"></td>
        </tr>
        <tr>
          <td>Password:</td>
          <td><input id="logon-password" type="password" autocomplete="off"></td>
        </tr>
        <tr>
          <td colspan="2">
            <small>
              No account yet?
              Sign up <a href="solver" target="_blank">here</a>.
            </small>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The SERVER dialog permits solver selection, update and shut-down. -->
  <div id="server-modal" class="modal">
    <div id="server-dlg" class="inp-dlg">
      <div class="dlg-title">
        Server and solver
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="server-host-div">
        <span id="server-host" title="Linny-R directory">Server on local host</span>
        <img id="server-defaults-btn" class="sbtn enab" src="images/settings.png"
             title="View/edit default model properties">
      </div>
      <div id="server-no-solver-div">No solver detected</div>
      <div id="server-solver-div" hidden="hidden">
        <div id="server-sel">
          <label>Default solver:</label>
          <select id="server-solver">
          </select>
        </div>
      </div>
      <button id="server-update" hidden="hidden">Update Linny-R to new version</button>
      <button id="server-shut-down">Shut down server</button>
    </div>
  </div>
  
  <!-- The DEFAULTS dialog permits modifying the Linny-R configuration file. -->
  <div id="defaults-modal" class="modal">
    <div id="defaults-dlg" class="inp-dlg">
      <div class="dlg-title">
        Default properties for new models
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table id="defaults-tbl">
        <tr>
          <td>
            <label>Author name:</label>
            <input id="defaults-author" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>
            <label>Currency unit:</label>
            <input id="defaults-currency" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>
            <label>Time step:</label>
            <input id="defaults-time-scale" type="text" autocomplete="off">
            <select id="defaults-time-unit">
              <option value="year">year</option>
              <option value="week">week</option>
              <option value="day">day</option>
              <option value="hour" selected="selected">hour</option>
              <option value="minute">minute</option>
              <option value="second">second</option>
            </select>
          </td>
        </tr>
        <tr>
          <td>
            <label>Product unit:</label>
            <input id="defaults-scale-unit" type="text" autocomplete="off">
          </td>
        </tr>
        <tr title="When checked, data copied to clipboard from the Chart manager
will be written with decimal comma instead of decimal point.">
          <td>
            <div id="defaults-comma" class="box clear"></div>
            <div class="box-lbl">Use decimal <u>comma</u> when copying data</div>
          </td>
        </tr>
        <tr title="When checked, small slack uses are reported in monitor">
          <td>
            <div id="defaults-show-notices" class="box checked"></div>
            <div class="box-lbl">Report small slack uses</div>
          </td>
        </tr>
      </table>
    </div>
  </div>
  
  <!-- The MODEL dialog prompts for (optional) model name and author name. -->
  <div id="model-modal" class="modal">
    <div id="model-dlg" class="inp-dlg">
      <div class="dlg-title">
        New model
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr>
          <td>Name:</td>
          <td>
            <input id="model-name" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>Author:</td>
          <td>
            <input id="model-author" type="text" autocomplete="off">
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The SAVE dialog prompts for a new model name and more. -->
  <div id="save-modal" class="modal">
    <div id="save-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="save-action">Save</span> model
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr title="Use slash(es) to specify a subdirectory of the user workspace">
          <td>Name:</td>
          <td>
            <input id="save-name" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>Author:</td>
          <td>
            <input id="save-author" type="text" autocomplete="off">
          </td>
        </tr>
      </table>
      <div id="save-options">
        <div id="save-encrypt-div">
          <div id="save-encrypt" class="box clear"></div>
          <div id="save-encrypt-lbl">
            Encrypt
          </div>
        </div>
        <div id="save-black-box-div">
          <div id="save-black-box" class="box clear"></div>
          <div id="save-black-box-lbl">
            Black box
          </div>
        </div>        
      </div>
    </div>
  </div>

  <!-- The BROWSER modal is the main dialog for the File manager. -->
  <div id="browser-modal" class="modal">
    <div id="browser-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="browser-action">Load</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="browser-buttons">
        <img id="browser-system-btn" class="btn enab"
             src="images/system.png"
             title="Load model directly via browser">
        <img id="browser-download-btn" class="btn enab"
             src="images/download.png"
             title="Download model directly via browser">
        <img id="browser-delete-btn" class="btn enab off"
             src="images/delete.png"
             title="Delete selected model from folder">
        <img id="browser-autosave-btn" class="btn enab off"
             src="images/autosave-config.png"
             title="View/edit auto-save settings">
      </div>
      <div id="browser-dir-scroll-area">
        <table id="browser-dir-table">
        </table>
      </div>
      <div id="browser-model-header">
        <div id="browser-name-header" class="sort-asc">Model name</div>
        <div id="browser-time-header">Date and time</div>
        <div id="browser-size-header">Size</div>
      </div>
      <div id="browser-model-scroll-area">
        <table id="browser-model-table">
        </table>
      </div>
      <img id="browser-root-img" src="images/home.png" class="off">
      <div id="browser-path"></div>
      <div id="browser-resize" class="resizer"></div>
    </div>
  </div>
    
  <!-- The UPLOAD dialog permits loading a model via the internet browser. -->
  <div id="upload-modal" class="modal">
    <div id="upload-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="upload-action">Load</span> model from this computer
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="upload-xml-file" type="file">
    </div>
  </div>

  <!-- The PASSWORD dialog prompts the user for a password. -->
  <div id="password-modal" class="modal">
    <div id="password-dlg" class="inp-dlg">
      <div class="dlg-title">
        Enter password
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="password-code" type="password">
    </div>
  </div>    
    
  <!-- The SET PASSWORD dialog prompts the user for a password. -->
  <div id="set-password-modal" class="modal">
    <div id="set-password-dlg" class="inp-dlg">
      <div class="dlg-title">
        Set password
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="set-password-code" type="password">
    </div>
  </div>    
    
  <!-- The CONFIRM PASSWORD dialog prompts to confirm a password. -->
  <div id="confirm-password-modal" class="modal">
    <div id="confirm-password-dlg" class="inp-dlg">
      <div class="dlg-title">
        Confirm password
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="confirm-password-code" type="password">
    </div>
  </div>    
    
  <!-- The AUTOSAVE dialog allows the user to change auto-save settings. -->
  <div id="autosave-modal" class="modal">
    <div id="autosave-dlg" class="inp-dlg">
      <div class="dlg-title">
        Auto-save settings
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="autosave-minutes-div">
        <label>Auto-save interval</label>
        <input id="autosave-minutes" type="text" autocomplete="off">
        minutes <small>(0 = OFF)</small>
      </div>
      <div id="autosave-hours-div"
        <label>Remove models after</label>
        <input id="autosave-hours" type="text" autocomplete="off">
        hours
      </div>
    </div>
  </div>
  
  <!-- The UNITS datalist is a placeholder for scale units. -->
  <datalist id="units-data">
    <option value="1">
    <!-- Unit list is updated by the GUI controller. -->
  </datalist>
  
  <!-- The MODEL SETTINGS dialog allows the user to modify model parameters. -->
  <div id="settings-modal" class="modal">
    <div id="settings-dlg" class="inp-dlg">
      <div class="dlg-title">
        Model settings
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
        <img class="info-btn" src="images/info.png"
             title="View/edit the documentation for this model">
      </div>
      <table>
        <tr>
          <td>Name:</td>
          <td><input id="settings-name" type="text" autocomplete="off"></td>
        </tr>
        <tr>
          <td>Author:</td>
          <td><input id="settings-author" type="text" autocomplete="off"></td>
        </tr>
        <tr>
          <td colspan="2">Default product unit:&nbsp;
            <input id="settings-product-unit" type="text"
                   list="units-data" autocomplete="off">
            <img id="settings-scale-units-btn" class="sbtn"
                 src="images/scale.png" title="View scale units">
          </td>
        </tr>
        <tr>
          <td colspan="2">Currency unit:&nbsp;
            <input id="settings-currency-unit" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="settings-block-arrows" class="box clear"></div>
            <div class="box-lbl">Show hidden flows as block arrows</div>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="settings-align-to-grid" class="box clear"></div>
            <div id="settings-grid">
              Snap to alignment grid with
              <input id="settings-grid-pixels" type="text" autocomplete="off">
              pixels resolution
            </div>
          </td>
        </tr>
        <tr>
          <td colspan="2">Time step:&nbsp;
            <input id="settings-time-scale" type="text" autocomplete="off">
            <select id="settings-time-unit">
              <option value="year">year</option>
              <option value="week">week</option>
              <option value="day">day</option>
              <option value="hour" selected="selected">hour</option>
              <option value="minute">minute</option>
              <option value="second">second</option>
            </select>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            Optimize from&nbsp;step&nbsp;t<sub><small>1</small></sub> = 
            <input id="settings-period-start" type="text" autocomplete="off">
            &nbsp;to&nbsp;&nbsp;t<sub><small>N</small></sub> = 
            <input id="settings-period-end" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td colspan="2">Block length:&nbsp;
            <input id="settings-block-length" type="text" autocomplete="off">
            &nbsp;&nbsp;Look-ahead:&nbsp;
            <input id="settings-look-ahead" type="text" autocomplete="off">
            time steps
          </td>
        </tr>
        <tr>
          <td colspan="2">Solver time limit:&nbsp;
            <input id="settings-time-limit" type="text" autocomplete="off">
            seconds per block
            <img id="settings-solver-prefs-btn" class="sbtn" src="images/settings.png"
                 title="Set solver preferences">
          </td>
        </tr>
        <tr title="When checked, finite process bounds and slack variables are always added">
          <td colspan="2">
            <div id="settings-diagnose" class="box clear"></div>
            <div class="box-lbl">Diagnose infeasible/unbounded problems</div>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="settings-power" class="box clear"></div>
            <div class="box-lbl">Support power grid options</div>
            <img id="settings-power-btn" class="sbtn" src="images/power.png"
                 title="View/edit power grid settings">
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="settings-cost-prices" class="box clear"></div>
            <div class="box-lbl">Infer and display cost prices</div>
          </td>
        </tr>
        <tr title="Reports will be saved in user/reports/, and removed after 24 h">
          <td colspan="2">
            <div id="settings-report-results" class="box clear"></div>
            <div class="box-lbl">Report results after each run</div>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="settings-negative-flows" class="box clear"></div>
            <div class="box-lbl">Do not warn when process levels are < 0</div>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="settings-decimal-comma" class="box clear"></div>
            <div class="box-lbl">Use decimal <u>comma</u> when copying data to clipboard</div>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <div id="settings-encrypt" class="box clear"></div>
            <div class="box-lbl">Prompt for encryption with password when saving</div>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The SCALE UNITS dialog allows viewing/editing scale units. -->
  <div id="scale-units-modal" class="modal">
    <div id="scale-units-dlg" class="inp-dlg">
      <div class="dlg-title">
        Scale units
        <img class="close-btn" src="images/close.png">
      </div>
      <div id="scale-units-buttons">
        <img id="scale-units-new-btn" class="btn enab" src="images/new.png"
             title="New scale unit">
        <img id="scale-units-edit-btn" class="btn disab" src="images/edit.png"
             title="Edit selected scale unit">
        <img id="scale-units-delete-btn" class="btn disab" src="images/delete.png"
             title="Delete selected scale unit">
      </div>
      <div id="scale-units-scroll-area">
        <table id="scale-units-table">
        </table>
      </div>
    </div>
  </div>

  <!-- The ADD SCALE UNIT dialog prompts for a new scale unit. -->
  <div id="new-scale-unit-modal" class="modal">
    <div id="new-scale-unit-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="new-scale-unit-action" >Define new</span> scale unit
        <img class="cancel-btn" src="images/cancel.png"">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr>
          <td>Unit:</td>
          <td title="Unit symbols must be alphanumeric and start with a letter.
NOTE: Unit symbols are case-sensitive, so BTU &ne; Btu">
            <input id="new-scale-unit-name" type="text" autocomplete="off">
          </td>
          <td>=</td>
          <td>
            <input id="new-scale-unit-scalar" type="text" autocomplete="off">
          </td>
          <td title="Base unit (optional)">
            <input id="new-scale-unit-base" type="text" list="units-data" autocomplete="off">
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The POWER GRIDS dialog allows viewing/editing power grids. -->
  <div id="power-grids-modal" class="modal">
    <div id="power-grids-dlg" class="inp-dlg">
      <div class="dlg-title">
        Power grids
        <img class="close-btn" src="images/close.png">
      </div>
      <div id="power-grids-buttons">
        <img id="power-grids-new-btn" class="btn enab" src="images/new.png"
             title="New power grid">
        <img id="power-grids-edit-btn" class="btn disab" src="images/edit.png"
             title="Edit selected power grid">
        <img id="power-grids-delete-btn" class="btn disab" src="images/delete.png"
             title="Delete selected power grid">
      </div>
      <div id="power-grids-scroll-area">
        <table id="power-grids-table">
        </table>
      </div>
      <div id="power-grids-aspects"
           title="Checked aspects will be ignored for all power grids">
        <div class="box-lbl-low"><em>Disregard:</em>&nbsp</div>
        <div id="power-grids-capacity" class="box clear"></div>
        <div class="box-lbl-low">Congestion</div>
        <div id="power-grids-KVL" class="box clear"></div>
        <div class="box-lbl-low" title="Kirchhoff's Voltage Law">KVL</div>
        <div id="power-grids-losses" class="box clear"></div>
        <div class="box-lbl-low">Losses</div>
      </div>
    </div>
  </div>

  <!-- The ADD POWER GRID dialog prompts for a new power grid. -->
  <div id="new-power-grid-modal" class="modal">
    <div id="new-power-grid-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="new-power-grid-action" >Define new</span> power grid
        <img class="cancel-btn" src="images/cancel.png"">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table id="new-power-grid-tbl">
        <tr>
          <td>Name:</td>
          <td>
            <input id="new-power-grid-name" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>
            Voltage:
          </td>
          <td>
            <input id="new-power-grid-voltage" type="text" autocomplete="off">
            kV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Color:
            <input id="new-power-grid-color" type="color">
          </td>
        </tr>
        <tr title="Unit of the level of power grid processes.
NOTE: Products directly linked to such processes should have a proportional unit.">
          <td colspan="2">
            Power unit:
            <select id="new-power-grid-unit">
              <option value="W">watt (W)</option>
              <option value="kW">kilowatt (kW)</option>
              <option value="MW">megawatt (MW)</option>
              <option value="GW">gigawatt (GW)</option>
            </select>
          </td>
        </tr>
        <tr title="When checked, Kirchhoff's voltage law will be observed">
          <td colspan="2">
            <div id="grid-kirchhoff" class="box clear"></div>
            <div class="box-lbl-low">Add power flow constraints</div>
          </td>
        </tr>
        <tr title="Power loss is computed by approximating rP&sup2;">
          <td colspan="2">
            Losses:
            <select id="new-power-grid-losses">
              <option value="0">Disregard</option>
              <option value="1">Proportional with load</option>
              <option value="2">Piecewise linear (2 slopes)</option>
              <option value="3">Piecewise linear (3 slopes)</option>
            </select>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The SOLVER dialog permits specifying solver preference and tolerances. -->
  <div id="solver-modal" class="modal">
    <div id="solver-dlg" class="inp-dlg">
      <div class="dlg-title">
        Solver preferences
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr title="This solver will be used if it is installed">
          <td>
            <label>Preferred solver:</label>
            <select id="solver-preference">
            </select>
          </td>
        </tr>
        <tr title="Tolerance may range from 1e-9 to 0.1">
          <td>
            <label>Integer feasibility tolerance:</label>
            <input id="solver-int-feasibility"
                   placeholder="5e-7" type="text" autocomplete="off">
          </td>
        </tr>
        <tr title="Relative gap may range from 0 to 0.5">
          <td>
            <label>Relative MIP gap:</label>
            <input id="solver-mip-gap"
                   placeholder="1e-4" type="text" autocomplete="off">
          </td>
        </tr>
        <tr title="When checked, small slack uses are reported in monitor">
          <td>
            <div id="solver-show-notices" class="box clear"></div>
            <div class="box-lbl">Report small slack uses</div>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The INCLUDE dialog prompts for a prefix and parameter bindings. -->
  <div id="include-modal" class="modal">
    <div id="include-dlg" class="inp-dlg">
      <div class="dlg-title">
        Include model <span id="include-name"></span> as cluster
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="include-cluster-div">
        <label>Cluster:</label>
        <input id="include-prefix" type="text"
               placeholder="(name must be unique)" autocomplete="off">
      </div>
      <div id="include-actor-div">
        <label>Actor:</label>
        <input id="include-actor" type="text"
               placeholder="(no actor)" autocomplete="off">
      </div>
      <div  id="include-bindings-div">
        Parameter bindings:
      </div>
      <div id="include-scroll-area">
      </div>
    </div>
  </div>  

  <!-- The UPDATE dialog prompts for the module name to be selected
       from the list of modules that have been included in the model.
    -->
  <div id="update-modal" class="modal">
    <div id="update-dlg" class="inp-dlg">
      <div class="dlg-title">
        Update clusters previously included from a model file
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="update-clusters-div">
        <div>
          Update using model: <span id="update-name"></span>
        </div>
        <div>
          <label>Clusters based on:</label>
          <select id="update-module">
          </select>
          <div id="update-count" class="update-cc"></div>
        </div>
        <div id="update-issues">
          <div id="update-issues-header"></div>
          <div id="update-issues-area"></div>
        </div>
        <div id="update-remove">
          <div id="update-remove-header">
            <span id="update-remove-count"></span> will be removed
          </div>
          <div id="update-remove-area"></div>
        </div>
      </div>
    </div>
  </div>  

  <!-- The CONFIRM LOAD modal asks to confirm to load model. -->
  <div id="confirm-load-model-modal" class="modal">
    <div id="confirm-load-model-dlg" class="inp-dlg">
      <div class="dlg-title dlg-alert">
        Confirm load model
      </div>
      <div id="confirm-load-model-msg">
        Changes to current model will be discarded.<br>
        Continue?
      </div>
      <div id="confirm-load-model-buttons">
        <img class="ok-btn" src="images/ok.png">
        Yes
        <img class="cancel-btn" src="images/cancel.png">
        No
      </div>
    </div>
  </div>

  <!-- The CONFIRM PERFORM modal asks to confirm to a particular action. -->
  <div id="confirm-perform-modal" class="modal">
    <div id="confirm-perform-dlg" class="inp-dlg">
      <div class="dlg-title dlg-alert">
        Confirm
        <span id="confirm-perform-action"></span>
      </div>
      <div id="confirm-perform-msg">
        This action cannot be undone.<br>
        Continue?
      </div>
      <div id="confirm-perform-buttons">
        <img class="ok-btn" src="images/ok.png">
        Yes
        <img class="cancel-btn" src="images/cancel.png">
        No
      </div>
    </div>
  </div>

  <!-- The ACTOR dialog allows modification of the name and relative weight
       of a selected actor.
    -->
  <div id="actor-modal" class="modal">
    <div id="actor-dlg" class="inp-dlg">
      <div class="dlg-title">
        Modify actor <span id="actor-span"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr>
          <td>Name:</td>
          <td>
            <input id="actor-name" type="text" autocomplete="off">
          </td>
          <td>
            <div id="actor-io"
                 title="Click to set/unset actor as model parameter">
              &#10063;
              <div id="actor-import">&darr;</div>
              <div id="actor-export">&uarr;</div>
            </div>
          </td>
        </tr>
        <tr>
          <td>Weight:</td>
          <td>
            <input id="actor-W" type="text" autocomplete="off">
          </td>
          <td>
            <img id="actor-W-x" class="sbtn enab" src="images/edit.png"
                 title="Edit expression for actor weight">
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The ACTORS (plural!) dialog displays a scrollable list of all actors.
       Clicking an actor will open the ACTOR dialog for that actor.
       NOTE: Changes to this list are discarded if CANCEL is clicked.
    -->
  <div id="actors-modal" class="modal">
    <div id="actors-dlg" class="inp-dlg">
      <div class="dlg-title">
        Actors
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="round-settings">
        <div id="round-count-lbl"
             title="Defining multiple rounds permits game-theoretic optimization">
          Optimization in <span id="round-count">1 round</span>
        </div>
        <img id="add-round-btn" class="v-btn" src="images/add.png"
             title="Add one more round">
        <img id="delete-round-btn" class="v-btn" src="images/remove.png"
             title="Delete selected round (click its column header to select)">
        <div id="default-seq-div" title="Sequence of rounds when running this model">
          <label>Sequence:</label>
          <input id="default-sequence" type="text" autocomplete="off"
                 placeholder="a (default)">
        </div>
        <div id="round-info-lbl">
          <em>Checked actors can <strong>not</strong> change their production
          levels in that round</em>&nbsp;&#8628;
        </div>
      </div>
      <div id="actors-scroll-hdr">
        <div id="actors-name-hdr">Actor name</div>
        <div id="actors-weight-hdr"
             title="Multiplier of actor cash flow in objective function
&rarr; Set to 0 to disregard an actor's interest
&rarr; Use conditional expression (e.g., r = 3 ? 0 : 1) to differentiate between rounds">
          Weight
        </div>
        <div id="rounds-hdr"
             title="Click to select; Ctrl-click to check/uncheck for all actors">
        </div>
      </div>
      <div id="actors-scroll">
        <table id="actors-table"></table>
      </div>
    </div>
  </div>

  <!-- NOTE: The following hidden DIVs implement modal dialogs for the buttons on
       the side bar.
    -->

  <!-- The ADD PROCESS dialog prompts only for the process name and (optionally)
       the name of the actor "owning" it.
    -->
  <div id="add-process-modal" class="modal">
    <div id="add-process-dlg" class="inp-dlg">
      <div class="dlg-title">
        Add process
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr>
          <td>Name:</td>
          <td>
            <input id="add-process-name" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>Actor:</td>
          <td>
            <input id="add-process-actor" type="text" autocomplete="off">
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The ADD PRODUCT dialog prompts only for the product name
       and its unit of measure.
    -->
  <div id="add-product-modal" class="modal">
    <div id="add-product-dlg" class="inp-dlg">
      <div class="dlg-title">
        Add product
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr>
          <td>Name:</td>
          <td>
            <input id="add-product-name" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>Unit:</td>
          <td>
            <input id="add-product-unit" list="units-data"
                   type="text" autocomplete="off">
            <div id="add-product-data" class="box clear"></div>
            <div class="box-lbl">Data</div>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The CLUSTER dialog prompts only for the process name and (optionally)
       the name of the actor "owning" it.
       NOTE: This dialog is also used to *edit* these properties of an existing
       cluster, as clusters have no other intrinsic properties (they merely
       group other Linny-R entities).
    -->
  <div id="cluster-modal" class="modal">
    <div id="cluster-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="cluster-action">Add</span> cluster
        <span id="cluster-group"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <tr>
          <td>Name:</td>
          <td colspan="2">
            <input id="cluster-name" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>Actor:</td>
          <td>
            <input id="cluster-actor" type="text" autocomplete="off">
          </td>
          <td>
            <img id="cluster-include-btn" class="mbtn enab" src="images/open.png"
                 title="Include other model as cluster in current model">
          </td>
        </tr>
      </table>
      <div id="cluster-options" hidden>
        <div id="cluster-collapsed" class="box clear"></div>
        <div class="box-lbl-low">Display as small square&nbsp;&nbsp;&nbsp;</div>
        <div id="cluster-ignore" class="box clear"></div>
        <div class="box-lbl-low">Ignore&nbsp;&nbsp;&nbsp;</div>
        <div id="cluster-black-box" class="box clear"></div>
        <div class="box-lbl-low">Black box</div>
      </div>
    </div>
  </div>
  
  <!-- The NOTE dialog -- notes have no name as identifier => no input field.
       NOTE: This dialog is also used to *edit* an existing note.
    -->
  <div id="note-modal" class="modal">
    <div id="note-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="note-action">Add</span> note <span id="note-number"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <textarea id="note-text" autocomplete="off" autocorrect="off"
                autocapitalize="off"></textarea>
      <div id="note-attr">
        Color:
        <input id="note-C" type="text" autocomplete="off"
          title="0 = yellow (default), 1 = green, 2 = blue, 3 = purple, 4 = white, 5 = ALERT">
        <img id="note-C-x" class="sbtn enab" src="images/edit.png"
             title="Edit expression for note color">
      </div>
    </div>
  </div>

  <!-- The MODIFY LINK dialog allows specifying link properties. The names of
       the FROM and TTO nodes are set dynamically (as inner HTML). The proprties
       that can be changed are the multiplier and the rate, and for "typical" links
       (product flows Q -> P) the % allocated cost for the TO-node.
    -->
  <div id="link-modal" class="modal">
    <div id="link-dlg" class="inp-dlg">
      <div class="dlg-title">
        <!-- The link arrow symbol depends on type of link: product => solid,
             data => dashed. No spacing between <span> elements, as these
             elements have left and right padding.
          -->
        <div id="link-x-y">Link X<span id="link-arrow-1">&#x279D;</span>Y:</div>
        <div id="link-from-name" title="FROM">
        </div><span id="link-arrow-2">&#x279D;</span><div id="link-to-name" title="TO">
        </div>
        <span id="link-group"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table>
        <!-- NOTE: Only links to "information products" can have different rate multipliers. -->
        <tr id="link-multiplier-row">
          <td>
            Multiplier:
            <select id="link-multiplier">
              <option id="link-flow" selected="selected" value="0">
                Level of X (no flow symbol)
              </option>
              <option id="link-throughput" value="1">
                &rrarr; (throughput: the sum of all inflows of X)
              </option>
              <option id="link-increase" value="2">
                &Delta; (increase: X[t] &minus; X[t-1])
              </option>
              <option id="link-sum" value="3">
                &Sigma; (sum: the total of levels X[t-&delta;] through X[t])
              </option>
              <option id="link-mean" value="4">
                &mu; (mean: the average level &Sigma;/(&delta;+1) )
              </option>
              <option id="link-startup" value="5">
                &#x25B2; (start-up: 1 if X[t-1] = 0 &and; X[t] > 0, otherwise 0)
              </option>
              <option id="link-on" value="6">
                &plus; (positive: 1 if X[t] > 0, otherwise 0)
              </option>
              <option id="link-off" value="7">
                0 (zero: 1 if X[t] = 0, otherwise 0)
              </option>
              <option id="link-minus" value="14">
                &minus; (negative: 1 if X[t] < 0, otherwise 0)
              </option>
              <option id="link-shutdown" value="10">
                &#x25BC; (shut-down: 1 if X[t-1] > 0 &and; X[t] = 0, otherwise 0)
              </option>
              <option id="link-slack" value="12">
                &#x21A5; (maximum ramp-up: UB - X[t])
              </option>
              <option id="link-slack" value="13">
                &#x21A7; (maximum ramp-down: -LB - X[t])
              </option>
              <option id="link-spinning" value="8">
                &#x2934; (spinning reserve: UB - X[t] if X[t] > 0, otherwise 0)
              </option>
              <option id="link-cycle" value="15">
                &#x27F3; (cycle: 1 if X ends a cycle in time step t, otherwise 0)
              </option>
              <option id="link-first-commit" value="9">
                &#10034; (first commit: 1 if X[t] > 0 &and; X[i] = 0 &forall; i &lt; t, otherwise 0)
              </option>
              <option id="link-peak-inc" value="11">
                &#x2A39; (peak increase: X&#x302;[b] &minus; X&#x302;[b-1] if bt = 1, otherwise 0)
              </option>
            </select>
          </td>
        </tr>
        <tr>
          <td>
            Rate (<span id="link-to-unit">unit</span>/<span id="link-from-unit">level</span>):
            <input id="link-R" type="text" autocomplete="off">
            <img id="link-R-x" class="sbtn enab"
                 title="Edit expression for link rate" src="images/edit.png">
          </td>
        </tr>
        <!-- NOTE: Only output liks can have a delay and a share of cost. -->
        <tr id="link-output-row" hidden="hidden">
          <td>
            Delay &delta;:
            <input id="link-D" type="text" autocomplete="off">
            <img id="link-D-x" class="sbtn enab"
                 title="Edit expression for link delay" src="images/edit.png">
            <div id="link-output-soc">
              Attributed share of cost:
              <input id="link-share-of-cost" type="text" autocomplete="off">%
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The constraint dialog allows specification of a constraint between two nodes.
       The names of the constraining node FROM and the constrained node TO are set dynamically
       (as inner HTML) along the X and Y axis, respectively.
       A constraint defines how the RELATIVE upper and lower bounds of TO vary as a function of
       RELATIVE level of FROM. Both nodes MUST therefore have a non-infinite upper bound.
       The user defines constraints on the relative level of TO (scaled between 0 and 100% of its
       upper bound) as a linear function of the relative level of FROM (likewise scaled to its
       upper bound) by drawing one or more straight bound lines in the X-Y graph displayed by
       this dialog.
       NOTE: This dialog is "managed" by the single instance of class ConstraintEditor
             (the global variable CONSTRAINT_EDITOR). This editor tracks all edits in its own
             properties; a new instance of Constraint is created (or edits to an existing
             instance become effectuated) only when OK is clicked.
    -->
  <div id="constraint-modal" class="modal">
    <div id="constraint-dlg" class="inp-dlg">
      <div class="dlg-title">Constraint X <span class="normal">&#x219D;</span> Y
        <span id="constraint-group"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">

      </div>
      <div id="constraint-button-bar">
        <img id="add-point-btn" class="mbtn enab" src="images/add.png"
             title="Add new point to selected bound line">
        <img id="del-point-btn" class="mbtn disab"
             title="Remove selected point from bound line" src="images/remove.png">
        <img id="add-bl-btn" class="mbtn enab" src="images/pwlf.png"
             title="Add new bound line">
        <img id="bl-data-btn" class="mbtn enab" src="images/dataset.png"
             title="Add/modify bound line data">
        <!-- NOTE: Values correspond to constants used by Virtual Machine. -->
        <select id="bl-type" title="Bound type">
          <option value="1">&le;</option>
          <option value="3" selected>=</option>
          <option value="2">&ge;</option>
        </select>
        <img id="del-bl-btn" class="mbtn disab" src="images/delete.png"
             title="Delete selected bound line">
      </div>
      <div id="constraint-y-label">% range of <span id="constraint-to-name"></span></div>
      <!-- NOTE: This is the div that will contain the chart's SVG image. -->
      <div id="constraint-container"></div>
      <div id="constraint-x-label">% range of <span id="constraint-from-name"></span></div>
      <div id="constraint-pos-x">X = 0</div>
      <div id="constraint-pos-y">Y = 0</div>
      <div id="constraint-point" title="Selected point"></div>
      <div id="constraint-equation" title="Equation for line segment"></div>
      <div id="constraint-bottom-div">
        <div id="constraint-no-slack-div"
             title="Check to enforce bounds (Caution: this may make model infeasible)">
          <div id="constraint-no-slack" class="box clear"></div>
          <div id="constraint-no-slack-lbl">No slack</div>
        </div>
        <div id="constraint-convex"></div>
        <div id="constraint-soc">
          <label>Attributed share of cost:</label>
          <select id="constraint-soc-direct">
            <option value="1">X&rarr;Y</option>
            <option value="-1">Y&rarr;X</option>
          </selector>
          <input id="constraint-share-of-cost" type="text" autocomplete="off"><label>%</label>
        </div>
      </div>
    </div>
  </div>

  <!-- BOUNDLINE DATA modal -->
  <div id="boundline-data-modal" class="modal">
    <div id="boundline-data-dlg" class="inp-dlg">
      <div class="dlg-title">
        Boundline data
        <img class="close-btn" src="images/close.png">
      </div>
      <div id="boundline-data-remote">
        <img id="boundline-data-clip" src="images/paperclip.png">
        <input id="boundline-data-url" type="text" autocomplete="off"
               placeholder="URL or path on local host"
               title="Path can be absolute, or relative to (Linny-R)/user/data.
Parameters %i, %j and %k will be replaced by the corresponding iterator values.">
      </div>
      <div id="boundline-data-series-lbl">Point data</div>
      <img class="btn enab" id="boundline-data-edit-btn"
           src="images/edit.png" title="Edit point data">
      <img class="ok-btn off" id="boundline-data-save-btn"
           src="images/ok.png" title="Save changes">
      <img class="cancel-btn off" id="boundline-data-cancel-btn"
           src="images/cancel.png" title="Discard changes">
      <div id="boundline-data-series-area">
        <table id="boundline-data-series-table">
        </table>
      </div>
      <textarea id="boundline-data-series" hidden="hidden" autocomplete="off"
                autocorrect="off" autocapitalize="off" spellcheck="false"
                title="Point coordinates must be semicolon-separated values between 0 and 1.
Each line should represent the points of a different bound line.">
      </textarea>
      <div id="boundline-data-line">
        <span id="boundline-data-line-number"></span>
        (<span id="boundline-data-line-count">no data</span>)
      </div>
      <div id="boundline-data-sel-titles">
        <span>Selector</span>
        <span class="bl-index">Line index expression or
        <span class="bl-points">points expression</span></span>
      </div>
      <div id="boundline-data-sel-area">
        <table id="boundline-data-sel-table">
        </table>
      </div>
      <div id="boundline-data-sel-buttons">
        <img id="bl-add-sel-btn" class="btn enab"
             src="images/add-selector.png" title="Add new selector">
        <img id="bl-rename-sel-btn" class="btn disab"
             src="images/rename.png" title="Rename selected selector">
        <img id="bl-edit-sel-btn" class="btn disab"
             src="images/edit.png" title="Edit expression of selected selector">
        <img id="bl-delete-sel-btn" class="btn disab h-sep"
             src="images/delete.png" title="Delete selected selector">
      </div>
    </div>
  </div>

  <!-- BOUNDLINE POINT modal -->
  <div id="boundline-point-modal" class="modal">
    <div id="boundline-point-dlg" class="inp-dlg">
      <div class="dlg-title">
        Precise point coordinates
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="boundline-point-x-lbl">X =</div>
      <input id="boundline-point-x" type="text" autocomplete="off">
      <div id="boundline-point-x-percent">%</div>
      <div id="boundline-point-y-lbl">Y =</div>
      <input id="boundline-point-y" type="text" autocomplete="off">
      <div id="boundline-point-y-percent">%</div>
    </div>
  </div>

  <!-- PROCESS properties dialog -->
  <div id="process-modal" class="modal">
    <div id="process-dlg" class="inp-dlg">
      <div class="dlg-title">
        Process properties
        <span id="process-group"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="process-name-lbl">Name:</div>
      <input id="process-name" type="text" autocomplete="off">
      <div id="process-actor-lbl">Actor:</div>
      <input id="process-actor" type="text" autocomplete="off">
      <div id="process-LB-lbl">Lower bound:</div>
      <input id="process-LB" type="text" autocomplete="off">
      <img id="process-LB-x" class="sbtn enab"  src="images/edit.png"
           title="Edit expression for lower process bound">
      <div id="process-UB-lbl">Upper bound:</div>
      <input id="process-UB" type="text" autocomplete="off">
      <img id="process-UB-x" class="sbtn enab" src="images/edit.png"
           title="Edit expression for upper process bound">
      <!-- The "equal bounds" button is displayed middle-left of the two input fields. -->
      <div id="process-UB-equal" class="bbtn ne" title="Set equal bounds"></div>
      <div id="process-IL-lbl">Initial level:</div>
      <input id="process-IL" type="text" autocomplete="off">
      <img id="process-IL-x" class="sbtn enab" src="images/edit.png"
           title="Edit expression for initial production level">
      <div id="process-int-div">
        <div id="process-integer" class="box clear"></div>
        <div id="process-int-lbl">Integer</div>
      </div>
      <div id="process-shut-down-div">
        <div id="process-shut-down" class="box clear"></div>
        <div id="process-shut-down-lbl">
          Shut down if lower bound (>0) constrains
        </div>
      </div>
      <div id="process-pace-div">
        Level change frequency: 1/
        <input id="process-LCF" type="text" autocomplete="off">
        time step(s)
        <img id="process-LCF-x" class="sbtn enab" src="images/edit.png"
             title="Edit expression for level change frequency">
      </div>
      <div id="process-collapsed-div">
        <div id="process-collapsed" class="box clear"></div>
        <div id="process-collapsed-lbl">Display as small rectangle</div>
      </div>
      <div id="process-grid-plate" class="no-grid-plate"></div>
      <div id="process-grid-plate-menu"></div>
      <div id="process-grid-overlay" hidden="hidden">
        <img id="process-negated" src="images/eq-negated.png">
        <div id="process-negated-msg">
          will be set to minus upper bound
        </div>
        <div id="process-grid-msg">
          When marked as grid element, lower bound, initial level,
          integer constraint, shut-down and level change frequency data
          are preserved but ignored.
        </div>
        <div id="process-length-div">
          Length of line or cable:
          <input id="process-length" type="text" autocomplete="off">
          km
        </div>
      </div>
    </div>
  </div>

  <!-- The PRODUCT properties dialog permits editing a product. -->
  <div id="product-modal" class="modal">
    <div id="product-dlg" class="inp-dlg">
      <div class="dlg-title">
        Product properties
        <span id="product-group"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="product-name-lbl">Name:</div>
      <input id="product-name" type="text" autocomplete="off">
      <div id="product-unit-lbl">Unit:</div>
      <input id="product-unit" type="text" list="units-data" autocomplete="off">
      <div id="source" title="Source products may have level &lt; 0">
        <div id="product-source" class="box clear"></div>
        <div id="product-source-lbl">Source</div>
      </div>
      <div id="sink" title="Sink products may have level &gt; 0">
        <div id="product-sink" class="box clear"></div>
        <div id="product-sink-lbl">Sink</div>
      </div>
      <div id="stock"
           title="Stock products aggregate their inflows and outflows over time">
        <div id="product-stock" class="box clear"></div>
        <div id="product-stock-lbl">Stock</div>
      </div>
      <div id="data"
           title="Data products aggregate information on processes and products">
        <div id="product-data" class="box clear"></div>
        <div id="product-data-lbl">Data</div>
      </div>
      <div id="product-LB-lbl">Lower bound:</div>
      <input id="product-LB" type="text" autocomplete="off">
      <img id="product-LB-x" class="sbtn enab" src="images/edit.png"
           title="Edit expression for lower product bound">
      <div id="product-UB-lbl">Upper bound:</div>
      <input id="product-UB" type="text" autocomplete="off">
      <img id="product-UB-x" class="sbtn enab" src="images/edit.png"
           title="Edit expression for upper product bound">
      <!-- The "equal bounds" button is displayed middle-left of the two input fields. -->
      <div id="product-UB-equal" class="bbtn ne" title="Set equal bounds"></div>
      <div id="product-IL-lbl">Initial level:</div>
      <input id="product-IL" type="text" autocomplete="off">
      <img id="product-IL-x" class="sbtn enab" src="images/edit.png"
           title="Edit expression for initial stock level">
      <div id="product-P-div">
        <div id="product-P-lbl">
          Price
          <small>(<span id="product-currency"></span><span id="product-P-unit"></span>)</small>:
        </div>
        <input id="product-P" type="text" autocomplete="off">
        <img id="product-P-x" class="sbtn enab" src="images/edit.png"
             title="Edit expression for product market price">
      </div>
      <div id="product-int-div">
        <div id="product-integer" class="box clear"></div>
        <div id="product-int-lbl">Integer</div>
      </div>
      <div id="product-no-slack-div"
           title="Check to enforce bounds (Caution: this may make model infeasible)">
        <div id="product-no-slack" class="box clear"></div>
        <div id="product-no-slack-lbl">No slack</div>
      </div>
      <div id="product-no-links-div">
        <div id="product-no-links" class="box clear"></div>
        <div id="product-no-links-lbl">Hide related links</div>
      </div>
      <div id="product-io" title="Click to set/unset as model parameter">
        &#10063;
        <div id="product-import">&darr;</div>
        <div id="product-export">&uarr;</div>
      </div>
    </div>
  </div>

  <!-- The DATASET GROUP modal allows editing properties of multiple datasets. -->
  <div id="datasetgroup-modal" class="modal">
    <div id="datasetgroup-dlg" class="inp-dlg">
      <div class="dlg-title">
        Dataset group properties
        <span id="datasetgroup-group"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="datasetgroup-prefix-lbl">Prefix:</div>
      <input id="datasetgroup-prefix" type="text" autocomplete="off">
      <div id="datasetgroup-default-lbl">Default value:</div>
      <input id="datasetgroup-default" type="text" autocomplete="off">
      <div id="datasetgroup-unit-lbl">Unit:</div>
      <input id="datasetgroup-unit" type="text" list="units-data" autocomplete="off">
      <div id="datasetgroup-periodic" class="box clear"></div>
      <div id="datasetgroup-periodic-lbl">Periodic</div>
      <div id="datasetgroup-array" class="box clear"></div>
      <div id="datasetgroup-array-lbl">Array</div>
      <div id="datasetgroup-no-time-msg">
        Arrays ignore time dimension
      </div>
      <div id="datasetgroup-time-step-lbl">Time step:</div>
      <input id="datasetgroup-time-scale" type="text" autocomplete="off">
      <select id="datasetgroup-time-unit">
        <option value="year">yr</option>
        <option value="week">wk</option>
        <option value="day">d</option>
        <option value="hour">h</option>
        <option value="minute">m</option>
        <option value="second">s</option>
      </select>
      <div id="datasetgroup-method-lbl">Method:</div>
      <select id="datasetgroup-method">
        <option value="nearest">at nearest t</option>
        <option value="w-mean">weighted mean</option>
        <option value="w-sum">weighted sum</option>
        <option value="max">maximum</option>
      </select>
      <div id="datasetgroup-separator"></div>
      <div id="datasetgroup-modif-header">Modifiers</div>
      <div id="datasetgroup-modif-titles">
        <span>Selector</span>
        <span class="lm35">Expression</span>
      </div>
      <div id="datasetgroup-modif-scroll-area">
        <table id="datasetgroup-modif-table">
        </table>
      </div>
      <div id="datasetgroup-modif-buttons">
        <img id="dsg-add-modif-btn" class="btn enab"
             src="images/add-selector.png" title="Add new selector">
        <img id="dsg-rename-modif-btn" class="btn disab" src="images/rename.png"
             title="Rename selected modifier">
        <img id="dsg-edit-modif-btn" class="btn disab"
             src="images/edit.png" title="Edit expression of selected modifier">
        <img id="dsg-delete-modif-btn" class="btn disab h-sep"
             src="images/delete.png" title="Delete selected modifier">
      </div>
    </div>
  </div>
  
  <!-- The GROUP SELECTOR dialog prompts for a new selector. -->
  <div id="group-selector-modal" class="modal">
    <div id="group-selector-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="group-selector-action">Add</span> selector
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="group-selector-name" type="text"
             title="Can contain only alphanumeric characters, +, -, and %
NOTE: * and ? will be interpreted as wildcards" 
             maxlength="10" autocomplete="off">
      <div id="group-selector-label">(1 to 10 characters)</div>
    </div>
  </div>

  <!-- The CLONE dialog prompts for a prefix for the selection-to-be-cloned. -->
  <div id="clone-modal" class="modal">
    <div id="clone-dlg" class="inp-dlg">
      <div class="dlg-title">
        Clone selection <span id="clone-count"></span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="clone-instruction">
        Prefix + actor should result in unique new names
        for selected processes and clusters.<br>
        <em>Products will NOT be cloned unless a prefix is specified.</em>
      </div>
      <table>
        <tr>
          <td>Prefix:</td>
          <td>
            <input id="clone-prefix" type="text" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>Actor:</td>
          <td>        
            <input id="clone-actor" type="text" autocomplete="off">
          </td>
        </tr>
      </table>
      <div>
        <div id="clone-renumbering" class="box clear"></div>
        <div class="box-lbl-low"
             title="NOTE: This applies only to selected processes and products">
          Use incremental numbering where possible
        </div>
      </div>
    </div>
  </div>  

  <!-- The MOVE modal asks to confirm to move node to focal cluster. -->
  <div id="move-modal" class="modal">
    <div id="move-dlg" class="inp-dlg">
      <div class="dlg-title dlg-alert">
        Confirm move
      </div>
      <div id="move-msg">
        Really move <span id="move-node-type"></span>
        <em><span id="move-node-name"></span></em>
        from cluster <strong><span id="move-from-cluster"></span></strong>
        to this cluster?
      </div>
      <div id="move-buttons">
        <img class="ok-btn" src="images/ok.png">
        Yes
        <img class="cancel-btn" src="images/cancel.png">
        No
      </div>
    </div>
  </div>

  <!-- The REPLACE PRODUCT dialog asks to select another product. -->
  <div id="replace-modal" class="modal">
    <div id="replace-dlg" class="inp-dlg">
      <div class="dlg-title">
        Replace <div id="replace-product-name"></div>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="replace-div">
        <label>Replace by:</label>
        <select id="replace-by-name">
          <!-- Possible replacement options are added by the GUI controller. -->
        </select>
        <div id="replace-option"
             title="When checked, only the links shown in this diagram will be redirected">
          <div id="replace-local" class="box clear"></div>
          <div class="box-lbl-low">(locally)</div>
        </div>
      </div>
    </div>
  </div>
      

  <!-- The EXPRESSION EDITOR dialog is a resizable modal dialog. -->
  <div id="expression-modal" class="modal">
    <div id="expression-dlg" class="inp-dlg">
      <div class="dlg-title">Editing expression for
        <div id="expression-property"></div>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
        <img class="info-btn" src="images/info.png">
      </div>
      <div id="variable-bar">
        <select id="variable-obj">
          <option value="0" selected="selected">Process</option>
          <option value="1">Product</option>
          <option value="2">Cluster</option>
          <option value="3">Link</option>
          <!-- <option value="4">Constraint</option> -->
          <option value="5">Actor</option>
          <option value="6">Dataset</option>
          <option value="7">Equation</option>
        </select>
        <select id="variable-name"></select>
        <select id="variable-attr"></select>
        <button id="variable-insert">Insert</button>
      </div>
      <textarea id="expression-text" autocomplete="off" autocorrect="off"
                autocapitalize="off" spellcheck="false"></textarea>
      <div id="expression-status">&nbsp;</div>
      <div id="expression-info"></div>
      <div id="expression-resize" class="resizer"></div>
    </div>
  </div>


  <!-- The DATASET MANAGER dialog allows definition of datasets. -->
  <div id="dataset-dlg" class="inp-dlg">
    <div id="dataset-hdr" class="dragger dlg-title">Dataset manager
      <img id="dataset-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="dataset-buttons">
      <img id="ds-new-btn" class="btn enab" src="images/new.png"
           title="New dataset">
      <img id="ds-data-btn" class="btn disab" src="images/dataset.png"
           title="Edit time series of selected dataset">
      <img id="ds-rename-btn" class="btn disab" src="images/rename.png"
           title="Rename selected dataset">
      <img id="ds-clone-btn" class="btn disab" src="images/clone.png"
           title="Clone selected dataset">
      <img id="ds-load-btn" class="btn enab" src="images/open.png"
           title="Load dataset(s) from CSV file">
      <img id="ds-delete-btn" class="btn disab" src="images/delete.png"
           title="Delete selected dataset">
    </div>
    <div id="dataset-header">Datasets</div>
    <div id="dataset-scroll-area">
      <table id="dataset-table">
      </table>
    </div>
    <div id="dataset-properties">
      <div>Default = <span id="dataset-default">0</span></div>
      <div>N =
        <span id="dataset-count">0</span>
        <span id="dataset-special"></span>
      </div>
      <div id="dataset-stats">
        <div>Range:
          <span id="dataset-min"></span>&hellip;<span id="dataset-max"></span>
        </div>
        <div>&mu; = <span id="dataset-mean"></span>,
          &sigma; = <span id="dataset-stdev"></span>
        </div>
      </div>
      <div id="dataset-blackbox" class="off"
           title="Click to set/unset dataset as &quot;black-boxed&quot;">
        &#x25FC;
      </div>
      <img id="dataset-outcome" src="images/outcome.png"
           title="Click to consider/ignore dataset expressions as experiment outcome">
      <div id="dataset-io"
           title="Click to set/unset dataset as model parameter">
        &#10063;
        <div id="dataset-import">&darr;</div>
        <div id="dataset-export">&uarr;</div>
      </div>
    </div>
    <div id="dataset-prefixed-count" class="blink"></div>
    <div id="dataset-separator"></div>
    <div id="dataset-modif-header">(no dataset selected)</div>
    <div id="dataset-modif-ds-name"></div>
    <div id="dataset-modif-titles">
      <span>Selector</span>
      <span class="lm35">Expression</span>
    </div>
    <div id="dataset-modif-scroll-area">
      <table id="dataset-modif-table">
      </table>
    </div>
    <div id="dataset-modif-buttons">
      <img id="ds-add-modif-btn" class="btn enab"
           src="images/add-selector.png" title="Add new selector">
      <img id="ds-rename-modif-btn" class="btn disab" src="images/rename.png"
           title="Rename selected modifier">
      <img id="ds-edit-modif-btn" class="btn disab"
           src="images/edit.png" title="Edit expression of selected modifier">
      <img id="ds-delete-modif-btn" class="btn disab h-sep"
           src="images/delete.png" title="Delete selected modifier">
      <img id="ds-convert-modif-btn" class="btn enab h-sep blink"
           src="images/dataset.png" title="Convert modifiers to prefixed datasets"
           hidden>
    </div>
    <div id="dataset-resize" class="resizer"></div>
  </div>

  <!-- The NEW DATASET dialog prompts for the name of a new dataset. -->
  <div id="new-dataset-modal" class="modal">
    <div id="new-dataset-dlg" class="inp-dlg">
      <div class="dlg-title">
        Name of new dataset
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="new-dataset-name" type="text" autocomplete="off">
    </div>
  </div>

  <!-- The RENAME DATASET dialog prompts for the new name of a dataset. -->
  <div id="rename-dataset-modal" class="modal">
    <div id="rename-dataset-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="rename-dataset-title">Rename dataset</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="rename-dataset-name" type="text" autocomplete="off">
    </div>
  </div>
  
  <!-- The LOAD CSV dialog prompts the user for a CSV file on disk
       to be loaded.
    -->
  <div id="load-csv-modal" class="modal">
    <div id="load-csv-dlg" class="inp-dlg">
      <div class="dlg-title">
        Load datasets from CSV file
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="load-csv-file" type="file">
    </div>
  </div>

  <!-- The NEW SELECTOR dialog prompts for a new selector for a dataset. -->
  <div id="new-selector-modal" class="modal">
    <div id="new-selector-dlg" class="inp-dlg">
      <div class="dlg-title">
        New <span id="new-selector-type">dataset modifier</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="new-selector-name" type="text"
             title="Can contain only alphanumeric characters, +, -, and %
NOTE: * and ? will be interpreted as wildcards" 
             maxlength="10" autocomplete="off">
      <div id="new-selector-label">(1 to 10 characters)</div>
    </div>
  </div>

  <!-- The RENAME SELECTOR dialog prompts for a new selector name. -->
  <div id="rename-selector-modal" class="modal">
    <div id="rename-selector-dlg" class="inp-dlg">
      <div class="dlg-title">
        Rename <span id="rename-selector-type">dataset modifier</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="rename-selector-name" type="text"
             title="Can contain only alphanumeric characters, +, -, and %" 
             maxlength="10" autocomplete="off">
      <div id="rename-selector-label">(1 to 10 characters)</div>
    </div>
  </div>

  <!-- The CONVERT MODIFIER prompts for the new name of a dataset. -->
  <div id="convert-modifiers-modal" class="modal">
    <div id="convert-modifiers-dlg" class="inp-dlg">
      <div class="dlg-title">
        Convert modifiers to datasets
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="convert-modifiers-div">
        Each modifier will become a dataset
        <tt><em>prefix</em>:&nbsp;<em>selector</em></tt>
        using this prefix: 
      </div>
      <input id="convert-modifiers-prefix" type="text" autocomplete="off">
    </div>
  </div>

  <!-- The SERIES dialog presents the properties of the time series
       data of the selected dataset, including a text area for copy/paste
       of numbers while showing the line count and checking for correct
       number format.
    -->
  <div id="series-modal" class="modal">
    <div id="series-dlg" class="inp-dlg">
      <div class="dlg-title">
        Edit time series
        <img class="ok-btn" src="images/ok.png">
        <img class="cancel-btn" src="images/cancel.png">
      </div>
      <div id="series-default-lbl">Default value:</div>
      <input id="series-default" type="text" autocomplete="off">
      <div id="series-unit-lbl">Unit:</div>
      <input id="series-unit" type="text" list="units-data" autocomplete="off">
      <div id="series-periodic" class="box clear"></div>
      <div id="series-periodic-lbl">Periodic</div>
      <div id="series-array" class="box clear"></div>
      <div id="series-array-lbl">Array</div>
      <div id="series-no-time-msg">
        Arrays ignore time dimension
      </div>
      <div id="series-time-step-lbl">Time step:</div>
      <input id="series-time-scale" type="text" autocomplete="off">
      <select id="series-time-unit">
        <!-- Options are added by DATASET_MANAGER. -->
      </select>
      <div id="series-method-lbl">Method:</div>
      <select id="series-method">
        <!-- Options are added by DATASET_MANAGER. -->
      </select>
      <div id="series-remote">
        <img id="series-clip" src="images/paperclip.png">
        <input id="series-url" type="text"
               placeholder="URL or path on local host"
               title="Path can be absolute or relative to (Linny-R)/user/data">
      </div>
      <div id="series-data-lbl">Series data:</div>
      <textarea id="series-data" autocomplete="off"
          autocorrect="off" autocapitalize="off" spellcheck="false">
      </textarea>
      <div id="series-line">
        Line <span id="series-line-number">1</span>
        (of <span id="series-line-count">1</span>)
      </div>
    </div>
  </div>


  <!-- The EQUATION dialog allows definition of equations. -->
  <div id="equation-dlg" class="inp-dlg">
    <div id="equation-hdr" class="dragger dlg-title">Equation manager
      <img id="equation-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="equation-buttons">
      <img id="eq-new-btn" class="btn enab" src="images/new.png"
           title="New equation">
      <img id="eq-rename-btn" class="btn disab" src="images/rename.png"
           title="Rename selected equation">
      <img id="eq-clone-btn" class="btn disab" src="images/clone.png"
           title="Clone selected equation">
      <img id="eq-edit-btn" class="btn disab" src="images/edit.png"
           title="Edit selected equation">
      <img id="eq-delete-btn" class="btn disab" src="images/delete.png"
           title="Delete selected equation">
      <img id="eq-view-btn" class="btn enab" src="images/zoom-in.png"
           title="Switch to multi-line expression display">
    </div>
    <img id="equation-outcome" class="not-selected" src="images/outcome.png"
         title="Click to consider/ignore selected equation as experiment outcome">
    <div id="equation-scroll-area">
      <table id="equation-table">
      </table>
    </div>
    <div id="equation-resize" class="resizer"></div>
  </div>

  <!-- The NEW EQUATION dialog prompts for the name of a new equation. -->
  <div id="new-equation-modal" class="modal">
    <div id="new-equation-dlg" class="inp-dlg">
      <div class="dlg-title">
        Name of new equation
        <img class="cancel-btn" src="images/cancel.png"">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="new-equation-name" type="text" autocomplete="off">
    </div>
  </div>

  <!-- The RENAME EQUATION dialog prompts for the new name of an equation. -->
  <div id="rename-equation-modal" class="modal">
    <div id="rename-equation-dlg" class="inp-dlg">
      <div class="dlg-title">
        Rename equation
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="rename-equation-name" type="text" autocomplete="off">
    </div>
  </div>

  <!-- The CLONE EQUATION dialog prompts for the new name of an equation. -->
  <div id="clone-equation-modal" class="modal">
    <div id="clone-equation-dlg" class="inp-dlg">
      <div class="dlg-title">
        Clone equation
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="clone-equation-name" type="text" autocomplete="off">
    </div>
  </div>


  <!-- The CHART dialog allows definition of charts and displays them. -->
  <div id="chart-dlg" class="inp-dlg">
    <div id="chart-hdr" class="dragger dlg-title">Chart manager
      <div id="chart-experiment-info"></div>
      <img id="chart-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="chart-control-panel">
      <div id="chart-buttons">
        <img id="chart-rename-btn" class="btn enab" src="images/rename.png"
             title="Rename selected chart">
        <img id="chart-clone-btn" class="btn enab" src="images/clone.png"
             title="Clone selected chart">
        <img id="chart-results-btn" class="btn enab" src="images/experiment.png"
             title="Show chart for experiment results (if any)">
        <img id="chart-runstat-btn" class="btn enab" src="images/runstat.png"
             title="Plot statistic for selected runs as bar chart">
        <img id="chart-delete-btn" class="btn enab" src="images/delete.png"
             title="Delete selected chart">
      </div>
      <select id="chart-selector">
        <!-- Options are added by the Chart manager. -->
      </select>
      <div id="chart-histogram" class="box clear"></div>
      <div id="chart-histogram-lbl">As histogram</div>
      <div id="chart-histogram-options">
        <label>with</label>
        <select id="histogram-bins" dir="rtl">
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="15">15</option>
          <option value="20">20</option>
          <option value="30">30</option>
          <option value="40">40</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>
        <label>bins</label>
      </div>
      <div id="chart-title" class="box clear"></div>
      <div id="chart-title-lbl">With title</div>
      <div id="chart-legend-lbl">Legend:</div>
      <select id="chart-legend">
        <!-- Options are added by the Chart manager. -->
      </select>
      <div id="chart-variables-header">
        Variables:
        <div id="chart-variable-buttons">
          <img id="chart-add-variable-btn" class="btn enab"
               src="images/add.png"
               title="Add variable (Shift-click to add a new equation)">
          <img id="chart-variable-up-btn" class="btn disab"
               src="images/up.png"
               title="Move selected variable up in list">
          <img id="chart-variable-down-btn" class="btn disab"
               src="images/down.png"
               title="Move selected variable down in list">
          <img id="chart-edit-variable-btn" class="btn disab"
               src="images/edit.png"
               title="Edit selected variable">
          <img id="chart-sort-variable-btn" class="btn disab"
               src="images/sort-not.png"
               title="Edit selected variable">
          <img id="chart-delete-variable-btn" class="btn disab"
               src="images/remove.png"
               title="Delete selected variable">
        </div>
      </div>
      <div id="chart-variables">
        <table id="chart-variables-table">
        </table>
      </div>
      <div id="chart-sorting-menu">
        <img id="chart-sort-not-btn" class="btn enab"
             src="images/sort-not.png"
             title="Do not sort series data for selected variable">
        <img id="chart-sort-asc-btn" class="btn enab"
             src="images/sort-asc.png"
             title="Sort series data for selected variable in ascending order">
        <img id="chart-sort-asc-lead-btn" class="btn enab"
             src="images/sort-asc-lead.png"
             title="Sort chart data in ascending order for selected variable">
        <img id="chart-sort-desc-btn" class="btn enab"
             src="images/sort-desc.png"
             title="Sort series data for selected variable in descending order">
        <img id="chart-sort-desc-lead-btn" class="btn enab"
             src="images/sort-desc-lead.png"
             title="Sort chart data in descending order for selected variable">
      </div>
    </div>
    <div id="chart-display-panel">
      <!-- NOTE: The scroller scrolls when the container is "stretched". -->
      <div id="chart-svg-scroller">
        <div id="chart-svg-container">
          <!-- NOTE: This is the div that will contain the chart's SVG image. -->
          <div id="chart-svg"></div>
        </div>
      </div>
      <div id="chart-table-panel" hidden="hidden"></div>
      <div id="chart-toggle-chevron" title="Hide control panel">&laquo;</div>
      <div id="chart-display-buttons">
        <img id="chart-stats-btn" class="btn enab" src="images/stats.png"
             title="Show descriptive statistics">
        <img id="chart-copy-stats-btn" class="btn enab"
             src="images/stats-to-clpbrd.png"
             title="Copy descriptive statistics to clipboard">
        <img id="chart-copy-data-btn" class="btn enab"
             src="images/data-to-clpbrd.png"
             title="Copy series data to clipboard">
        <div id="table-only-buttons">
          <img id="chart-copy-table-btn" class="btn enab"
               src="images/table-to-clpbrd.png"
               title="Copy table to clipboard (as HTML)">
        </div>
        <div id="chart-only-buttons">
          <img id="chart-save-btn" class="btn enab" src="images/download-chart.png"
               title="Download chart as bitmap image (PNG)
&#x270E; Shift-click to download chart as Scalable Vector Graphics (SVG)">
          <img id="chart-widen-btn" class="btn enab" src="images/stretch.png"
               title="Widen chart">
          <img id="chart-narrow-btn" class="btn enab" src="images/compress.png"
               title="Narrow chart">
        </div>
        <div id="chart-prefix-div">
          <select id="chart-prefix"></select>
        </div>
      </div>
      <div id="chart-time-div">
        <div id="chart-time-step"></div>
      </div>
    </div>
    <div id="chart-resize" class="resizer"></div>
  </div>

  <!-- The VARIABLE dialog allows formatting a chart variable. -->
  <div id="variable-modal" class="modal">
    <div id="variable-dlg" class="inp-dlg">
      <div class="dlg-title">
        <div id="variable-dlg-name"></div>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="variable-format-div">
        <div id="variable-color-div">
          <div id="variable-color-lbl">Color:</div>
          <div id="variable-color" title="Click to copy, Shift-click to paste"></div>
          <div id="variable-paste-color"></div>
        </div>
        <div id="variable-absolute-div"
             title="Plot the absolute value of this variable">
          <div id="variable-absolute" class="box clear"></div>
          <div class="box-lbl-low">Absolute</div>
        </div>
        <div id="variable-scale-div">
          <div id="variable-scale-lbl">Scale by:</div>
          <input id="variable-scale" type="text" autocomplete="off">
        </div>
        <div id="variable-width-div">
          <div id="variable-width-lbl">Line width:</div>
          <input id="variable-width" type="text" autocomplete="off">
        </div>
        <div id="variable-stacked-div">
          <div id="variable-stacked" class="box clear"></div>
          <div class="box-lbl-low">Stacked area</div>
        </div>
        <div id="variable-clipped-div">
          <div id="variable-clipped" class="box clear"></div>
          <div class="box-lbl-low">Clip outliers</div>
        </div>
      </div>
      <div id="color-picker"></div>
      <div id="change-equation-btns">
        <img id="chart-rename-equation-btn" class="btn enab"
             src="images/rename.png" title="Rename equation">
        <img id="chart-edit-equation-btn" class="btn enab spaced"
             src="images/edit.png"
             title="Edit equation">
      </div>
    </div>
  </div>

  <!-- The ADD VARIABLE dialog allows selecting a variable to add to the chart. -->
  <div id="add-variable-modal" class="modal">
    <div id="add-variable-dlg" class="inp-dlg">
      <div class="dlg-title">
        Add variable
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <select id="add-variable-obj">
        <option value="0" selected="selected">Process</option>
        <option value="1">Product</option>
        <option value="2">Cluster</option>
        <option value="3">Link</option>
        <!-- <option value="4">Constraint</option> -->
        <option value="5">Actor</option>
        <option value="6">Dataset</option>
        <option value="7">Equation</option>
      </select>
      <select id="add-variable-name"></select>
      <select id="add-variable-attr"></select>
    </div>
  </div>
  
  <!-- The ADD WILDCARD VARIABLES dialog allows selecting wildcard
       variables from a list to be added to the current chart.
    -->
  <div id="add-wildcard-variables-modal" class="modal">
    <div id="add-wildcard-variables-dlg" class="inp-dlg">
      <div class="dlg-title">
        Add wildcard matches
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="add-wildcard-variables-scroll-area">
        <table id="add-wildcard-variables-table">
        </table>
      </div>
    </div>
  </div>
  
  <!-- The RENAME CHART dialog prompts for the new title for a chart. -->
  <div id="rename-chart-modal" class="modal">
    <div id="rename-chart-dlg" class="inp-dlg">
      <div class="dlg-title">
        Rename chart
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="new-chart-title" type="text" autocomplete="off">
    </div>
  </div>

  <!-- The SENSITIVITY dialog allows sensitivity analysis. -->
  <div id="sensitivity-dlg" class="inp-dlg">
    <div id="sensitivity-hdr" class="dragger dlg-title">Sensitivity analysis
      <img id="sensitivity-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="sensitivity-control-panel">
      <div id="sa-base" title="Dataset modifier selectors for base scenario">
        Base:
        <input id="sa-base-selectors" type="text" autocomplete="off"
               placeholder="(no selectors)">
      </div>
      <div id="sa-delta" title="Relative change in parameter value">
        Delta:
        <input id="sensitivity-delta" type="text" autocomplete="off">
        <span id="sa-percent">%</span>
      </div>
      <div id="sa-p-header">
        Parameters:
        <div id="sa-p-btns">
          <img id="sa-p-add-btn" class="v-btn" src="images/add.png"
               title="Add parameter">
          <img id="sa-p-up-btn" class="v-btn v-disab spaced"
               src="images/up.png"
               title="Move selected parameter up in list">
          <img id="sa-p-down-btn" class="v-btn v-disab"
               src="images/down.png"
               title="Move selected parameter down in list">
          <img id="sa-p-delete-btn" class="v-btn" src="images/remove.png"
               title="Delete selected parameter">
        </div>
      </div>
      <div id="sa-p-scroll-area">
        <table id="sa-p-table"></table>
      </div>
      <div id="sa-o-header">
        Outcomes:
        <div id="sa-o-btns">
          <img id="sa-o-add-btn" class="v-btn" src="images/add.png"
               title="Add outcome">
          <img id="sa-o-up-btn" class="v-btn v-disab spaced"
               src="images/up.png"
               title="Move selected outcome up in list">
          <img id="sa-o-down-btn" class="v-btn v-disab"
               src="images/down.png"
               title="Move selected outcome down in list">
          <img id="sa-o-delete-btn" class="v-btn" src="images/remove.png"
               title="Delete selected outcome">
        </div>
      </div>
      <div id="sa-o-scroll-area">
        <table id="sa-o-table">
        </table>
      </div>
    </div>
    <div id="sensitivity-display-panel">
      <div id="sa-toggle-chevron" title="Hide control panel">&laquo;</div>
      <div id="sa-display-top-bar">
        <div id="sa-control-buttons">
          <img id="sa-start-btn" class="btn disab" src="images/solve.png"
               title="Start analysis">
          <img id="sa-pause-btn" class="btn enab off" src="images/pause.png"
               title="Pause analysis">
          <img id="sa-stop-btn" class="btn enab off" src="images/stop.png"
               title="Stop analysis">
          <img id="sa-reset-btn" class="btn enab off" src="images/reset.png"
               title="Clear results">
        </div>
        <div id="sa-progress"></div>
        <div id="sa-statistic">
          <label>Statistic:</label>
          <select id="sensitivity-statistic">
            <option title="Count" value="N">N</option>
            <option title="Mean" value="mean" selected="selected">&mu;</option>
            <option title="Standard deviation" value="sd">&sigma;</option>
            <option title="Sum" value="sum">&Sigma;</option>
            <option title="Lowest value" value="min">MIN</option>
            <option title="Highest value" value="max">MAX</option>
            <option title="Non-zero count" value="nz">&ne;0</option>
            <option title="Exception count" value="except">&#9888;</option>
            <option title="Value at final time step" value="last">&#10132;</option>
          </select>
        </div>
      </div>
      <div id="sa-scroll-area">
        <table id="sa-table">
        </table>
      </div>
      <div id="sa-bottom-bar">
        <div id="sa-abs-rel" title="Toggle absolute/relative change">%</div>
        <div id="sa-rb-scale" class="color-scale blue-to-red"></div>
        <div id="sa-no-scale" class="color-scale no-colors"></div>
        <img id="sa-copy-btn" class="btn enab" src="images/table-to-clpbrd.png"
             title="Copy table to clipboard (as HTML)">
        <img id="sa-copy-data-btn" class="btn enab"
             src="images/data-to-clpbrd.png" title="Copy data to clipboard">
      </div>
      <div id="sa-outcome-name"></div>
    </div>
    <div id="sensitivity-resize" class="resizer"></div>
  </div>

  <!-- The ADD SA VARIABLE dialog allows selecting a variable as parameter
       or outcome for sensitivity analysis.
    -->
  <div id="add-sa-variable-modal" class="modal">
    <div id="add-sa-variable-dlg" class="inp-dlg">
      <div class="dlg-title">
        Add <span id="add-sa-variable-type">parameter/outcome</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <select id="add-sa-variable-obj">
        <option value="0" selected="selected">Process</option>
        <option value="1">Product</option>
        <option id="add-sa-variable-cluster" value="2">Cluster</option>
        <option value="3">Link</option>
        <!-- <option value="4">Constraint</option> -->
        <option value="5">Actor</option>
        <option value="6">Dataset</option>
        <option id="add-sa-variable-equation" value="7">Equation</option>
      </select>
      <select id="add-sa-variable-name">
      </select>
      <select id="add-sa-variable-attr">
      </select>
    </div>
  </div>


  <!-- The EXPERIMENT dialog is the GUI of the Experiment manager. -->
  <div id="experiment-dlg" class="inp-dlg">
    <div id="experiment-hdr" class="dragger dlg-title">Experiment manager
      <img id="experiment-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="experiment-design">
      <div id="experiment-buttons">
        <img id="xp-new-btn" class="btn enab" src="images/new.png"
             title="New experiment">
        <img id="xp-rename-btn" class="btn disab" src="images/rename.png"
             title="Rename selected experiment">
        <img id="xp-view-btn" class="btn disab" src="images/table.png"
             title="View selected experiment">
        <img id="xp-order-btn" class="btn enab" src="images/sel-order.png"
             title="Specify ordering of selectors">
        <img id="xp-reset-btn" class="btn enab off" src="images/reset.png"
             title="Clear results for selected experiment">
        <img id="xp-delete-btn" class="btn disab" src="images/delete.png"
             title="Delete selected experiment">
      </div>
      <div id="experiment-header">Experiments</div>
      <div id="experiment-scroll-area">
        <table id="experiment-table">
        </table>
      </div>
      <div id="experiment-properties">
        <div id="experiment-combi-count"></div>
        <div id="experiment-dim-count"></div>
      </div>
      <div id="experiment-separator"></div>
      <div id="experiment-default-message">
        To define a meaningful experiment, a model must feature at least
        one outcome dataset, or a chart having one or more variables.
      </div>
      <div id="experiment-params-header">(no experiment selected)</div>
      <div id="experiment-params-div">
        <div id="experiment-d-header">Dimensions:
          <div id="experiment-d-btns">
            <img id="xp-d-add-btn" class="v-btn" src="images/add.png"
                 title="Add dimension">
            <img id="xp-d-up-btn" class="v-btn" src="images/up.png"
                 title="Move dimension up in list">
            <img id="xp-d-down-btn" class="v-btn" src="images/down.png"
                 title="Move dimension down in list">
            <img id="xp-d-settings-btn" class="v-btn" src="images/settings.png"
                 title="Edit model settings dimensions">
            <img id="xp-d-iterator-btn" class="v-btn" src="images/iterator.png"
                 title="Edit iterator ranges">
            <img id="xp-d-actor-btn" class="v-btn" src="images/actors.png"
                 title="Edit actors dimension">
            <img id="xp-d-combination-btn" class="v-btn" src="images/combination.png"
                 title="Edit combination dimensions">
            <img id="xp-d-delete-btn" class="v-btn" src="images/remove.png"
                 title="Remove selected dimension from list">
          </div>
        </div>
        <div id="experiment-d-scroll-area">
          <table id="experiment-dim-table">
          </table>
        </div>
        <div id="experiment-c-header">Charts:
          <img id="xp-c-add-btn" class="v-btn" src="images/add.png"
               title="Add chart">
            <img id="xp-c-delete-btn" class="v-btn" src="images/remove.png"
                 title="Remove selected chart from list">
        </div>
        <div id="experiment-c-scroll-area">
          <table id="experiment-chart-table">
          </table>
        </div>
        <div id="experiment-filter" title="Selectors to exclude from this experiment">
          Exclude:
          <input id="experiment-exclude" type="text" autocomplete="off">
        </div>
        <img id="xp-ignore-btn" class="btn disab"
             src="images/ignore.png" title="Select clusters to be ignored">
        <div id="xp-ignore-count"></div>
      </div>
    </div>
    <div id="experiment-viewer" hidden="hidden">
      <div id="viewer-buttons">
        <img id="xv-back-btn" class="btn enab" src="images/back.png"
             title="Back to design mode">
        <img id="xv-start-btn" class="btn enab" src="images/solve.png"
             title="Start experiment">
        <img id="xv-pause-btn" class="btn enab off" src="images/pause.png"
             title="Pause experiment">
        <img id="xv-stop-btn" class="btn enab off" src="images/stop.png"
             title="Stop experiment">
      </div>
      <div id="viewer-selectors">
        <label>Variable:</label>
        <select id="viewer-variable">
        </select>
        <label>Statistic:</label>
        <select id="viewer-statistic">
          <option title="Count" value="N">N</option>
          <option title="Mean" value="mean" selected="selected">&mu;</option>
          <option title="Standard deviation" value="sd">&sigma;</option>
          <option title="Sum" value="sum">&Sigma;</option>
          <option title="Lowest value" value="min">MIN</option>
          <option title="Highest value" value="max">MAX</option>
          <option title="Non-zero count" value="nz">&ne;0</option>
          <option title="Exception count" value="except">&#9888;</option>
          <option title="Value at final time step" value="last">&#10132;</option>
        </select>
      </div>
      <div id="viewer-bar">
        <div id="viewer-title"></div>
        <div id="viewer-progress"></div>
      </div>
      <div id="viewer-scroll-area">
        <table id="viewer-table"></table>
      </div>
      <div id="viewer-spinners">
        <label>Layout:</label>
        <div id="xp-config-spinner" class="spinner" title="# configuration dimensions">
          <div id="xp-cd-minus" class="spin-min">&minus;</div>
          <div id="xp-cd-value" class="spin-val">0</div>
          <div id="xp-cd-plus" class="spin-plus">&plus;</div>
        </div>
        <div id="xp-scen-spinner" class="spinner" title="# column scenario dimensions">
          <div id="xp-sd-minus" class="spin-min">&minus;</div>
          <div id="xp-sd-value" class="spin-val">0</div>
          <div id="xp-sd-plus" class="spin-plus">&plus;</div>
        </div>
        <label>Scale:</label>
        <select id="viewer-scale">
          <option title="Values as computed"
                  value="val" selected="selected">Values</option>
          <option id="viewer-difference-option"
                  title="Difference with reference configuration"
                  value="dif">Difference</option>
          <option title="Regret (difference with highest value in scenario)"
                  value="reg">Regret (-)</option>
          <option title="Computing time used by solver (in seconds)"
                  value="sec">Solver time</option>
        </select>
        <div id="xv-rb-scale" class="color-scale blue-to-red"></div>
        <div id="xv-br-scale" class="color-scale red-to-blue"></div>
        <div id="xv-rg-scale" class="color-scale green-to-red"></div>
        <div id="xv-gr-scale" class="color-scale red-to-green"></div>
        <div id="xv-no-scale" class="color-scale no-colors"></div>
        <img id="xv-copy-btn" class="btn enab" src="images/table-to-clpbrd.png"
             title="Copy table to clipboard (as HTML)">
        <img id="xv-download-btn" class="btn enab" src="images/save-data.png"
             title="Download results (CSV file)">
      </div>
    </div>
    <div id="experiment-resize" class="resizer"></div>
  </div>

  <!-- The NEW dialog prompts for the name of a new experiment. -->
  <div id="xp-new-modal" class="modal">
    <div id="xp-new-dlg" class="inp-dlg">
      <div class="dlg-title">
        Title of new experiment
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="xp-new-name" type="text" autocomplete="off">
    </div>
  </div>

  <!-- The RENAME dialog prompts for the new name of an experiment. -->
  <div id="xp-rename-modal" class="modal">
    <div id="xp-rename-dlg" class="inp-dlg">
      <div class="dlg-title">
        New title for
        <div id="xp-rename-former-name"></div>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <input id="xp-rename-name" type="text" autocomplete="off">
    </div>
  </div>

  <!-- The SELECTOR ORDER dialog permits specifying how selectors should
       be sorted. The selectors may contain a leading or trailing * as
       wildcard, and can be separated by spacrs, comma's or semicolons.
    -->
  <div id="sel-order-modal" class="modal">
    <div id="sel-order-dlg" class="inp-dlg">
      <div class="dlg-title">
        Ordering of selectors
        <img class="ok-btn" src="images/ok.png">
        <img class="cancel-btn" src="images/cancel.png">
      </div>
      <textarea id="sel-order-lines" autocomplete="off"
         placeholder="Selectors must be separated by spaces or new lines."
         autocorrect="off" autocapitalize="off" spellcheck="false">
      </textarea>
    </div>
  </div>

  <!-- The PARAMETER dialog prompts for a dataset or chart name. -->
  <div id="xp-parameter-modal" class="modal">
    <div id="xp-parameter-dlg" class="inp-dlg">
      <div class="dlg-title">
        Add <span id="xp-parameter-type">parameter</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <select id="xp-parameter-select">
      </select>
    </div>
  </div>

  <!-- The DOWNLOAD dialog asks which outcomes to save, and how. -->
  <div id="xp-download-modal" class="modal">
    <div id="xp-download-dlg" class="inp-dlg">
      <div class="dlg-title">
        Download results
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <fieldset id="xp-download-variables">
        <legend>Variables:</legend>
        <div>
          <input type="radio" id="xp-download-selected-v"
                 name="variables" value="selected">
          <label for="selected">Only the selected variable</label>
        </div>
        <div>
          <input type="radio" id="xp-download-all-v"
                 name="variables" value="all">
          <label for="all">All variables (N =
              <span id="xp-download-var-count"></span>)
          </label>
        </div>
      </fieldset>
      <fieldset id="xp-download-runs">
        <legend>Runs:</legend>
        <div>
          <input type="radio" id="xp-download-selected-r"
                 name="runs" value="selected">
          <label for="selected">Only the selected
              run<span id="xp-download-run-s">s</span>
          </label>
        </div>
        <div>
          <input type="radio" id="xp-download-all-r"
                 name="runs" value="all">
          <label for="all">All runs (N =
              <span id="xp-download-run-count"></span>)
          </label>
        </div>
      </fieldset>
      <fieldset id="xp-download-data">
        <legend>Data:</legend>
        <div>
          <input type="checkbox" id="xp-download-statistics" value="1">
          <label for="stats">Statistics</label>
        </div>
        <div>
          <input type="checkbox" id="xp-download-series" value="1">
          <label for="series">Time series data</label>
        </div>
        <div>
          <input type="checkbox" id="xp-download-solver" value="1">
          <label for="series">Solver information</label>
        </div>
      </fieldset>
      <fieldset id="xp-download-format">
        <legend>Format:</legend>
        <div id="xp-download-format-div">
          <label for="xp-download-separator">Separator:</label>
          <select id="xp-download-separator">
            <option value="comma">Comma</option>
            <option value="semicolon">Semicolon</option>
            <option value="tab">Tab</option>
          </select>
          <label for="xp-download-quotes">String quotes:</label>
          <select id="xp-download-quotes">
            <option value="none">None</option>
            <option value="single">Single</option>
            <option value="double">Double</option>
          </select>
          <label for="xp-download-precision">Precision:</label>
          <input type="text" id="xp-download-precision" autocomplete="off"> digits
        </div>
      </fieldset>
    </div>
  </div>

  <!-- The ITERATOR dialog permits editing the iterator ranges. -->
  <div id="xp-iterator-modal" class="modal">
    <div id="xp-iterator-dlg" class="inp-dlg">
      <div class="dlg-title">
        Iterator ranges
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <table id="xp-iterator-table">
        <tr>
          <td>i</td><td>=</td>
          <td>
            <input id="xp-iterator-i-from" type="text" class="range-limit"
                   placeholder="0" maxlength="4" autocomplete="off">
          </td>
          <td>&hellip;</td>
          <td>
            <input id="xp-iterator-i-to" type="text" class="range-limit"
                   placeholder="0" maxlength="4" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>j</td><td>=</td>
          <td>
            <input id="xp-iterator-j-from" type="text" class="range-limit"
                   placeholder="0" maxlength="4" autocomplete="off">
          </td>
          <td>&hellip;</td>
          <td>
            <input id="xp-iterator-j-to" type="text" class="range-limit"
                   placeholder="0" maxlength="4" autocomplete="off">
          </td>
        </tr>
        <tr>
          <td>k</td><td>=</td>
          <td>
            <input id="xp-iterator-k-from" type="text" class="range-limit"
                   placeholder="0" maxlength="4" autocomplete="off">
          </td>
          <td>&hellip;</td>
          <td>
            <input id="xp-iterator-k-to" type="text" class="range-limit"
                   placeholder="0" maxlength="4" autocomplete="off">
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- The SETTINGS dialog permits editing the model settings dimensions. -->
  <div id="xp-settings-modal" class="modal">
    <div id="xp-settings-dlg" class="inp-dlg">
      <div class="dlg-title">
        Model settings dimensions
        <img class="close-btn" src="images/close.png">
      </div>
      <div id="xp-settings-s-header">Selectors:
        <img id="xp-settings-s-add-btn" class="v-btn" src="images/add.png"
             title="Add selector">
      </div>
      <div id="xp-settings-s-scroll-area">
        <table id="xp-settings-s-table">
        </table>
      </div>
      <div id="xp-settings-d-header">Dimensions:
        <img id="xp-settings-d-add-btn" class="v-btn" src="images/add.png"
             title="Add dimension">
      </div>
      <div id="xp-settings-d-scroll-area">
        <table id="xp-settings-d-table">
        </table>
      </div>
    </div>
  </div>

  <!-- The SETTINGS SELECTOR dialog prompts for a selector + string. -->
  <div id="xp-settings-selector-modal" class="modal">
    <div id="xp-settings-selector-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="xp-settings-selector-action">Edit</span>
        model settings selector
        <span id="xp-settings-selector-clear" class="sd-clear">
          (clear settings field to remove)
        </span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div class="xp-s-div">
        <label>Selector:</label>
        <input id="xp-settings-selector-code" type="text"
               title="Max. 10 characters (only alphanumericals, +, -, and %)" 
               maxlength="10" autocomplete="off">
        <label>Settings:</label>
        <input id="xp-settings-selector-string" type="text" autocomplete="off"
               title="Can specifiy time step, simulation period, block length and look-ahead.
Example: s=0.5h  t=1-480  b=24  l=24
When modeling power grids, -c indicates &ldquo;disregard grid capacity&rdquo;,
-k &ldquo;disregard Kirchhoff's Voltage Law&rdquo;, and -l &ldquo;disregard power losses&rdquo;">
      </div>
    </div>
  </div>

  <!-- The SETTINGS DIMENSION dialog prompts for a selector combination. -->
  <div id="xp-settings-dimension-modal" class="modal">
    <div id="xp-settings-dimension-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="xp-settings-dimension-action">Edit</span>
        model settings dimension
        <span id="xp-settings-dimension-clear">(clear to remove)</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div class="xp-s-div"
           title="One or more model settings selectors, separated by spaces">
        <label>Selectors:</label>
        <input id="xp-settings-dimension-string" type="text" autocomplete="off">
      </div>
    </div>
  </div>

  <!-- The ACTOR DIMENSION dialog permits editing these dimensions. -->
  <div id="xp-actor-dimension-modal" class="modal">
    <div id="xp-actor-dimension-dlg" class="inp-dlg">
      <div class="dlg-title">
        Actor dimension
        <img class="close-btn" src="images/close.png">
      </div>
      <div id="xp-actor-dimension-header">Selectors:
        <img id="xp-actor-dimension-add-btn" class="v-btn" src="images/add.png"
             title="Add selector">
      </div>
      <div id="xp-actor-dimension-scroll-area">
        <table id="xp-actor-dimension-table">
        </table>
      </div>
    </div>
  </div>

  <!-- The ACTOR SELECTOR dialog prompts for a selector. -->
  <div id="xp-actor-selector-modal" class="modal">
    <div id="xp-actor-selector-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="xp-actor-selector-action">Edit</span> actor selector
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div class="xp-s-div">
        <label>Selector:</label>
        <input id="xp-actor-selector-code" type="text" autocomplete="off"
               title="Max. 10 characters (only alphanumericals, +, -, and %)" 
               maxlength="10">
        <span id="xp-actor-selector-clear" class="sd-clear">
          (clear to remove)
        </span>
      </div>
      <div class="xp-s-div">
        <label>Rounds sequence:</label>
        <input id="xp-actor-selector-rounds" type="text" autocomplete="off"
               title="One or more round letters">
      </div>
    </div>
  </div>

  <!-- The COMBINATION dialog permits editing the combination dimensions. -->
  <div id="xp-combination-modal" class="modal">
    <div id="xp-combination-dlg" class="inp-dlg">
      <div class="dlg-title">
        Combination dimensions
        <img class="close-btn" src="images/close.png">
      </div>
      <div id="xp-combination-s-header">Combination selectors:
        <img id="xp-combination-s-add-btn" class="v-btn" src="images/add.png"
             title="Add combination selector">
      </div>
      <div id="xp-combination-s-scroll-area">
        <table id="xp-combination-s-table">
        </table>
      </div>
      <div id="xp-combination-d-header">Combination dimensions:
        <img id="xp-combination-d-add-btn" class="v-btn" src="images/add.png"
             title="Add combination dimension">
      </div>
      <div id="xp-combination-d-scroll-area">
        <table id="xp-combination-d-table">
        </table>
      </div>
    </div>
  </div>

  <!-- The COMBINATION SELECTOR dialog prompts for a selector + string. -->
  <div id="xp-combination-selector-modal" class="modal">
    <div id="xp-combination-selector-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="xp-combination-selector-action">Edit</span>
        combination selector
        <span id="xp-combination-selector-clear" class="sd-clear">
          (clear combination field to remove)
        </span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div class="xp-s-div">
        <label>Selector:</label>
        <input id="xp-combination-selector-code" type="text"
               title="Max. 10 characters (only alphanumericals, +, -, and %)" 
               maxlength="10" autocomplete="off">
        <label>Combination:</label>
        <input id="xp-combination-selector-string" type="text" autocomplete="off"
               title="One or more selectors, each from a different dimension">
      </div>
    </div>
  </div>

  <!-- The COMBINATION DIMENSION dialog prompts for a combination dimension. -->
  <div id="xp-combination-dimension-modal" class="modal">
    <div id="xp-combination-dimension-dlg" class="inp-dlg">
      <div class="dlg-title">
        <span id="xp-combination-dimension-action">Edit</span>
        combination dimension
        <span id="xp-combination-dimension-clear">(clear to remove)</span>
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div class="xp-s-div"
           title="One or more combination selectors, separated by spaces">
        <label>Selectors:</label>
        <input id="xp-combination-dimension-string" type="text" autocomplete="off">
      </div>
    </div>
  </div>

  <!-- The "clusters to ignore" dialog displays a scrollable list of clusters
       set to be ignored for specified selectors.
       NOTE: Changes to this list are discarded if CANCEL is clicked.
    -->
  <div id="xp-clusters-modal" class="modal">
    <div id="xp-clusters-dlg" class="inp-dlg">
      <div class="dlg-title">
        Clusters set to be ignored
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <select id="xp-clusters-select"></select>
      <img id="xp-clusters-add-btn" src="images/add.png" class="btn enab"
           title="Add cluster to list">
      <div id="xp-clusters-no-list">
        No clusters set to be ignored
      </div>
      <div id="xp-clusters-list">      
        <div id="xp-clusters-scroll-hdr">
          <div id="xp-clusters-name-hdr">Cluster</div>
          <div id="xp-clusters-selectors-hdr">Selector(s)</div>
        </div>
        <div id="xp-clusters-scroll">
          <table id="xp-clusters-table" width="100%"></table>
        </div>
        <div id="xp-clusters-selectors-div">
          Selector(s):
          <input id="xp-clusters-selectors" type="text" autocomplete="off">
          <img id="xp-clusters-delete-btn" src="images/remove.png"
               class="btn enab" title="Delete cluster from list">
        </div>
      </div>
    </div>
  </div>


  <!-- The FINDER dialog allows searching for occurrence of entities. -->
  <div id="finder-dlg" class="inp-dlg">
    <div id="finder-hdr" class="dragger dlg-title">
      <span id="finder-title">Find occurrences of entities</span>
      <div id="finder-entity-imgs"></div>
      <img id="finder-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="finder-filter-bar">
      <input id="finder-filter-text" type="text" autocomplete="off"
             placeholder="(name filtering pattern)"
             title="Pattern may contain logical & (AND), | (OR) and ^ (NOT)
Limit search by starting with a type selector X?
where X can be one or several of these letters: ABCDELPQ">
    </div>
    <div id="finder-scroll-area">
      <table id="finder-table">
      </table>
    </div>
    <div id="finder-status">
      <span id="finder-count"></span> found
    </div>
    <div id="finder-status-buttons">
      <img id="finder-edit-btn" class="btn enab"
           src="images/edit.png"
           title="Edit attributes">
      <img id="finder-chart-btn" class="btn enab"
           src="images/chart.png"
           title="Add attribute to chart">
      <img id="finder-experiment-btn" class="btn enab"
           src="images/experiment.png"
           title="Only consider experiment outcomes">
      <img id="finder-table-btn" class="btn enab"
           src="images/table.png"
           title="View entity attribute values">
      <img id="finder-copy-btn" class="btn enab"
           src="images/table-to-clpbrd.png"
           title="Copy entity attributes to clipboard">
    </div>
    <div id="finder-separator"></div>
    <div id="finder-item-header">(no item selected)</div>
    <div id="finder-item-scroll-area">
      <table id="finder-item-table">
      </table>
    </div>
    <div id="finder-expression-hdr">No expressions</div>
    <div id="finder-expression-scroll-area">
      <table id="finder-expression-table">
      </table>
    </div>
    <div id="finder-data-pane">
      <table id="finder-data-header">
      </table>
      <div id="finder-data-scroll-area">
        <table id="finder-data-table">
        </table>
      </div>
    </div>
    <div id="finder-resize" class="resizer"></div>
  </div>

  <!-- The CONFIRM ADD CHART VARIABLES modal asks to confirm to add a
       specific attribute of the filtered entities to the current chart.
    -->
  <div id="confirm-add-chart-variables-modal" class="modal">
    <div id="confirm-add-chart-variables-dlg" class="inp-dlg">
      <div class="dlg-title">
        Add to chart
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div class="xp-s-div">
        <div id="confirm-add-chart-variables-attr-of">
          <select id="confirm-add-chart-variables-attribute"></select> of
        </div>
        <span id="confirm-add-chart-variables-count"></span>
      </div>
      <div>
        <div id="confirm-add-chart-variables-absolute" class="box clear"></div>
        <div class="box-lbl">Plot absolute values</div>
      </div>
      <div>
        <div id="confirm-add-chart-variables-stacked" class="box clear"></div>
        <div class="box-lbl">Plot as stacked areas</div>
      </div>
    </div>
  </div>

  <!-- The MONITOR dialog shows solver progress and messages, and model equations. -->
  <div id="monitor-dlg" class="inp-dlg">
    <div id="monitor-hdr" class="dragger dlg-title">Solver monitor
      <img id="monitor-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="monitor-tabs" class="tabs">
      <div id="monitor-msg-tab" class="tab sel-tab"
           title="Any text output from the MILP solver">
        Messages
      </div>
      <div id="monitor-vbl-tab" class="tab"
           title="Legend to variables (numbers are column indices in Simplex tableau)">
        Variables
      </div>
      <div id="monitor-eqs-tab" class="tab"
           title="Equations of the MILP problem submitted to the solver">
        Equations
      </div>
    </div>
    <textarea id="monitor-msg" autocomplete="off" autocorrect="off"
        autocapitalize="off" spellcheck="false" hidden="hidden"></textarea>
    <textarea id="monitor-vbl" autocomplete="off" autocorrect="off"
        autocapitalize="off" spellcheck="false" hidden="hidden"></textarea>
    <textarea id="monitor-eqs" autocomplete="off" autocorrect="off"
        autocapitalize="off" spellcheck="false" hidden="hidden"></textarea>
    <div id="monitor-blocks">1/1</div>
    <div id="monitor-timer">00:00</div>
    <div id="monitor-progress">
      <div id="monitor-progress-bar"></div>
    </div>
    <div id="monitor-resize" class="resizer"></div>
  </div>
  
  <!-- The CHANNEL dialog prompts for a channel name. -->
  <div id="channel-modal" class="modal">
    <div id="channel-dlg" class="inp-dlg">
      <div class="dlg-title">
        Activate receiver
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div class="channel-div">
        <div>
          Channel:
          <select id="channel-name" type="text" autocomplete="off" disabled
              title="To add a channel, you must create a new sub-directory of (Linny-R)/user/channel/">
          </select>
        </div>
        <div>
          <div id="channel-callback" class="box clear disab"></div>
          <div id="channel-callback-lbl" class="lbl-disab"
              title="Call-back can be enabled only when channel directory contains Python file &ldquo;call-back.py&rdquo;">
            Enable call-back
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- The DOCUMENTATION dialog shows user comments and Linny-R docu-items. -->
  <div id="documentation-dlg" class="inp-dlg">
    <div id="documentation-hdr" class="dragger dlg-title">
      <div id="docu-item-title">Documentation</div>
      <img id="documentation-close-btn" class="close-btn" src="images/close.png">
    </div>
    <div id="docu-container">
      <div id="docu-viewer"></div>
      <textarea id="docu-editor" autocomplete="off" autocorrect="off"
          autocapitalize="off" hidden="hidden"></textarea>
    </div>
    <img id="docu-edit-btn" class="btn disab" src="images/edit.png"
         title="Edit">
    <img id="docu-copy-btn" class="btn enab"  src="images/info-to-clpbrd.png"
         title="Copy documentation to clipboard">
    <img id="docu-model-info-btn" class="btn enab"  src="images/model-info.png"
         title="Show all model documentation">
    <img id="docu-save-btn" class="ok-btn" src="images/ok.png"
         title="Save">
    <img id="docu-cancel-btn" class="cancel-btn" src="images/cancel.png"
         title="Cancel">
    <img id="docu-info-btn" class="info-btn" src="images/info.png"
         title="Markup conventions">
    <img id="docu-resume-btn" class="close-btn" src="images/close.png"
         title="Resume editing">
    <div id="docu-symbols" title="Click to insert symbol in text">
      <div class="docu-sym" id="docu-tail-1">&#x2919;</div>
      <div class="docu-sym" id="docu-head">&#x21A3;</div>
      <div class="docu-sym" id="docu-link">&#x2192;</div>
      <div class="docu-sym" id="docu-constraint">&#x2911;</div>
      <div class="docu-sym" id="docu-bi-constraint">&#x2194;</div>
      <div class="docu-sym" id="docu-throughput">&#x21C9;</div>
      <div class="docu-sym" id="docu-change">&#x0394;</div>
      <div class="docu-sym" id="docu-sum">&#x3A3;</div>
      <div class="docu-sym" id="docu-mean">&#x03BC;</div>
      <div class="docu-sym" id="docu-startup">&#x25B2;</div>
      <div class="docu-sym" id="docu-shutdown">&#x25BC;</div>
      <div class="docu-sym" id="docu-spinning-reserve">&#x2934;</div>
      <div class="docu-sym" id="docu-first-commit">&#x2732;</div>
      <div class="docu-sym" id="docu-infinity">&#x221E;</div>
      <div class="docu-sym" id="docu-undefined">&#x2047;</div>
      <div class="docu-sym" id="docu-not-computed">&#x2BBF;</div>
      <div class="docu-sym" id="docu-computing">&#x25A6;</div>
      <div class="docu-sym" id="docu-warning">&#x26A0;</div>
    </div>
    <div id="docu-message-hint">
      To view messages, <span class="normal">Shift</span>-move
      cursor over status bar 
    </div>
    <div id="documentation-resize" class="resizer"></div>
  </div>
  
  <!-- The CALL STACK modal shows the VM's expression call stack
       when an error has occurred.
    -->
  <div id="call-stack-modal" class="modal">
    <div id="call-stack-dlg" class="inp-dlg">
      <div class="dlg-title dlg-alert">
        <div id="call-stack-error"></div>
        <img id="call-stack-close-btn" class="close-btn" src="images/close.png">
      </div>
      <div id="call-stack-table"></div>
    </div>
  </div>
  
  <!-- The CHECK UPDATE modal notifies that an update is available. -->
  <div id="check-update-modal" class="modal">
    <div id="check-update-dlg" class="inp-dlg">
      <div class="dlg-title dlg-alert">
        Linny-R software update
        <span id="check-update-manual" class="blink" hidden>
          Requires manual istallation
        </span>
      </div>
      <div id="check-update-msg"></div>
      <div id="check-update-buttons">
        <img class="ok-btn" src="images/ok.png">
        Shut down server to install new version
        <img class="cancel-btn" src="images/cancel.png">
        Continue using current version
      </div>
    </div>
  </div>

  <!-- The UPDATING modal notifies that an update is in progress. -->
  <div id="updating-modal" class="modal">
    <div id="updating-dlg" class="inp-dlg">
      <div class="dlg-title dlg-alert">
        Linny-R software update in progress
      </div>
      <div id="updating-msg">
        Updating should take only a few seconds.<br>
        After completion, Linny-R will reload.
        Your browser will prompt you to confirm.
      </div>
      <div id="updating-icon">
        <img src="images/octaeder.svg">
      </div>
    </div>
  </div>

  <!-- The PASTE dialog prompts for a prefix and parameter bindings. -->
  <div id="paste-modal" class="modal">
    <div id="paste-dlg" class="inp-dlg">
      <div class="dlg-title">
        Name conflict resolution strategy
        <img class="cancel-btn" src="images/cancel.png">
        <img class="ok-btn" src="images/ok.png">
      </div>
      <div id="paste-ftp" class="paste-option">
        <div id="paste-ftp-box" class="box checked"></div>
        <div class="paste-tactic">
          Change <span id="paste-from-prefix"></span>&hellip;
          to <span id="paste-to-prefix"></span>&hellip;
        </div>
      </div>
      <div id="paste-fta" class="paste-option">
        <div id="paste-fta-box" class="box checked"></div>
        <div class="paste-tactic">
          Change actor <span id="paste-from-actor"></span>
          to <span id="paste-to-actor"></span>
        </div>
      </div>
      <div class="paste-option">
        <div id="paste-a-box" class="box checked"></div>
        <div class="paste-tactic">
          <label>If no actor, add:</label>
          <input id="paste-actor" type="text"
                 placeholder="(no actor)" autocomplete="off">
        </div>
      </div>
      <div class="paste-option">
        <div id="paste-p-box" class="box checked"></div>
        <div class="paste-tactic">
          <label>Add prefix:</label>
          <input id="paste-prefix" type="text"
                 placeholder="(none)" autocomplete="off">
        </div>
      </div>
      <div class="paste-option">
        <div id="paste-inc-box" class="box checked"></div>
        <div class="paste-tactic">
          Auto-increment tail number
        </div>
      </div>
      <div id="paste-scroll-area">
      </div>
    </div>
  </div>  

  <!--- The rotating Linny-R logo icon. -->
  <div id="rotating-icon">
    <div>
      <img src="images/octaeder.svg">
    </div>
  </div>
</body>
</html>